(this.webpackJsonplocal_deal=this.webpackJsonplocal_deal||[]).push([[14],{44:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),o=n(2),i=n(3),l=n(10),s=n(9),c=n(11),d=n(0),u=n.n(d),p=n(16),m=n(1),f=n(55),g=n(187),h=n(51),b=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e={backgroundColor:this.props.disabled?h.a.color.greyDark:h.a.color.primaryColor};return u.a.createElement(g.a,Object.assign({style:Object(m.a)({},e,{},y.buttonStyle)},this.props),u.a.createElement("p",{style:y.text},this.props.children))}}]),t}(d.Component),y={buttonStyle:{borderRadius:25,marginLeft:20,marginRight:20,width:"inherit"},text:{color:h.a.color.white,fontSize:15,fontWeight:600,margin:0}},C=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).additionalStyle="primary"===n.props.color?v.primaryStyle:v.secondaryStyle,n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.a.createElement("p",{style:Object(m.a)({},v.default,{},this.additionalStyle)},this.props.children)}}]),t}(d.Component),v={default:{fontFamily:h.a.font.primaryFont,fontSize:9,margin:0},primaryStyle:{color:h.a.color.primaryColor},secondaryStyle:{color:h.a.color.secondaryColor}},S=n(62),D=n(74),j=n(90),F=n.n(j),E=n(127),k=n.n(E),x=n(130),w=n.n(x),O=n(128),A=n.n(O),I=n(129),T=n.n(I),B=n(91),R=n.n(B),P=n(184),L=n(53),W={root:{"& label.Mui-focused":{color:"yellow"},"& .MuiInput-underline:after":{borderBottomColor:"yellow",borderWidth:"0px"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"red"},"&:hover fieldset":{borderColor:"yellow"},"&.Mui-focused fieldset":{borderColor:"yellow",borderWidth:"0px"}}}},M=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;Object(L.a)(W)(P.a);return u.a.createElement(P.a,{multiline:this.props.multiline,onChange:function(t){return e.props.onChange(t.target.value)},placeholder:this.props.placeholder,rows:this.props.rows,style:V.textField})}}]),t}(d.Component),V={textField:{width:"inherit"}},z=function(e){function t(){var e,n,r=this;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).AddImageButton=function(){return u.a.createElement(r.Frame,null,u.a.createElement("input",{accept:"image/*",onChange:function(e){return n.props.onAddFile(e)},style:{display:"none"},id:"raised-button-file",multiple:!0,type:"file"}),u.a.createElement("label",{htmlFor:"raised-button-file"},u.a.createElement(g.a,{component:"span",style:H.addIconButton},u.a.createElement(F.a,{scale:"big",style:H.addIcon}))))},n.AddressSelection=function(){var e=n.props.selectedAddress?u.a.createElement(r.SelectedAddress,null):u.a.createElement(r.AddressBubble,null);return u.a.createElement(u.a.Fragment,null,u.a.createElement(r.MissingSectionLabel,{hide:n.props.hasAddress,label:n.appContext.labels.createDealPageV2.missingAddress}),u.a.createElement(f.a,{isFlexDirectionRow:!0,style:H.addressSectionContainer},u.a.createElement(R.a,{style:H.locationIcon}),e))},n.AddressBubble=function(){var e=n.appState.address.addressesPrediction.map((function(e){return u.a.createElement(f.a,{border:1,onClick:function(){return n.props.onClickAddress(e)},style:Object(m.a)({},H.addressBubbleContainer,{whiteSpace:"nowrap"})},u.a.createElement(D.a,{style:{color:h.a.color.secondaryColor}},e.formattedAddress))}));return u.a.createElement(f.a,{isFlexDirectionRow:!0,style:H.addressSelectionContainer},e)},n.BottomButtonSecton=function(){return u.a.createElement(f.a,{isFlexDirectionRow:!0,style:H.bottomButtonSectionContainer},u.a.createElement(r.DraftButton,null),u.a.createElement(r.SubmitButton,null))},n.CloseButton=function(){return u.a.createElement(k.a,{onClick:n.props.onClose,style:H.closeIcon})},n.Description=function(){return u.a.createElement(M,{multiline:!0,onChange:n.props.onChangeDescription,placeholder:n.appContext.labels.createDealPageV2.descriptionPlaceHolder,rows:6})},n.DraftButton=function(){return u.a.createElement(g.a,{onClick:n.props.onClickSaveDraft,style:H.draftButton},u.a.createElement(f.a,{style:H.draftButtonContainer},u.a.createElement(A.a,{style:H.draftIcon}),u.a.createElement(C,{color:"secondary"},n.appContext.labels.createDealPageV2.saveDraft)))},n.FileSection=function(){var e=n.props.files.map((function(e){return u.a.createElement(r.ImageContainer,{image:e})}));return n.props.files.length<n.props.allowNumberOfFile&&e.push(u.a.createElement(r.AddImageButton,null)),u.a.createElement(u.a.Fragment,null,u.a.createElement(r.MissingSectionLabel,{hide:n.props.hasField,label:n.appContext.labels.createDealPageV2.missingField}),u.a.createElement(f.a,{isFlexDirectionRow:!0,style:H.fileSectionContainer},e))},n.Header=function(){return u.a.createElement(f.a,{isFlexDirectionRow:!0,style:H.headerContainer},u.a.createElement(r.ImageDimensionTips,null),u.a.createElement(r.CloseButton,null))},n.ImageContainer=function(e){var t=e.image;return u.a.createElement(r.Frame,null,u.a.createElement("img",{alt:"user-input",src:t.base64Value,style:Object(m.a)({},H.imageStyle,{objectFit:"cover"})}))},n.ImageDimensionTips=function(){return u.a.createElement(f.a,{isFlexDirectionRow:!0,style:H.imageDimensionTipsContainer},u.a.createElement(T.a,{style:H.imageDimensionTipsIcon}),u.a.createElement(S.a,null,n.appContext.labels.createDealPageV2.imageDimensionTips))},n.Frame=function(e){var t=e.children;return u.a.createElement(f.a,{border:1,style:H.frameContainer},t)},n.MissingSectionLabel=function(e){var t=e.label;return e.hide?null:u.a.createElement(D.a,{style:{color:"red",fontWeight:"bold"}},t)},n.SelectedAddress=function(){var e,t;return u.a.createElement(f.a,{isFlexDirectionRow:!0,style:H.selectedAddressContainer},u.a.createElement(D.a,{style:H.selectedAddressText},null!==(e=null===(t=n.props.selectedAddress)||void 0===t?void 0:t.formattedAddress)&&void 0!==e?e:""),u.a.createElement(w.a,{onClick:n.props.onClickRemoveSelectedAddress,style:H.deleteIcon}))},n.SubmitButton=function(){return u.a.createElement(b,{onClick:n.props.onClickSubmit},n.appContext.labels.createDealPageV2.submitPost)},n.Title=function(){return u.a.createElement(M,{onChange:n.props.onChangeTitle,placeholder:n.appContext.labels.createDealPageV2.titlePlaceHolder})},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.a.createElement(f.a,{style:H.rootContainer},u.a.createElement(this.Header,null),u.a.createElement(this.FileSection,null),u.a.createElement(this.Title,null),u.a.createElement(this.Description,null),u.a.createElement(this.AddressSelection,null),u.a.createElement(this.BottomButtonSecton,null))}}]),t}(p.a),H={addIcon:{color:h.a.color.greyTransparent,fontSize:"80"},addIconButton:{borderRadius:10},addressBubbleContainer:{borderColor:h.a.color.secondaryColor,borderRadius:30,paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10,marginRight:5},addressSelectionContainer:{overflow:"scroll",paddingBottom:10},addressSectionContainer:{alignItems:"center",marginTop:5,width:"inherit"},bottomButtonSectionContainer:{alignItems:"center",justifyContent:"center",marginBottom:20,marginTop:20,width:"inherit"},closeIcon:{color:h.a.color.greyDark},deleteIcon:{color:h.a.color.greyDark},descriptionTextField:{marginTop:10,width:"inherit"},draftButton:{padding:0},draftButtonContainer:{alignItems:"center",justifyContent:"center"},draftIcon:{backgroundColor:h.a.color.secondaryColorTransparent,borderRadius:25,color:h.a.color.secondaryColor,fontSize:16,marginBottom:1,padding:3},fileSectionContainer:{alignItems:"start",overflow:"scroll",paddingBottom:10,paddingTop:10,width:"inherit"},frameContainer:{alignItems:"center",borderColor:h.a.color.greyTransparent,borderRadius:10,justifyContent:"center",margin:5,maxHeight:80,maxWidth:80,minHeight:80,minWidth:80},headerContainer:{alignItems:"center",justifyContent:"space-between",marginTop:15,width:"inherit"},imageDimensionTipsContainer:{alignItems:"center",justifyContent:"center"},imageDimensionTipsIcon:{color:h.a.color.secondaryColor,fontSize:18},imageStyle:{borderRadius:10,minHeight:"inherit",minWidth:"inherit"},locationIcon:{color:h.a.color.red,marginLeft:-5,marginRight:3,paddingBottom:10},rootContainer:{width:"inherit"},selectedAddressContainer:{alignItems:"center",justifyContent:"space-between",paddingBottom:10,width:"inherit"},selectedAddressText:{color:h.a.color.black},titleTextField:{marginTop:10,width:"inherit"}},_=n(7);n.d(t,"default",(function(){return U}));var U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(s.a)(t).call(this,e))).onAddFile=function(e){console.debug("onAddImage");var t=e.target.files;if(null!==t)for(var r=0;r<t.length;r++)n.convertImageToBase64(t[r])},n.onChangeDescription=function(e){console.debug("onChangeDescription"),n.setState({description:e})},n.onChangeTitle=function(e){console.debug("onChangeTitle"),n.setState({title:e})},n.onClickAddress=function(e){console.debug("onClickAddress"),n.setState({selectedAddress:e})},n.onClickRemoveSelectedAddress=function(){console.debug("onClickRemoveSelectedAddress"),n.setState({selectedAddress:void 0})},n.onClickSaveDraft=function(){console.debug("onClickSaveDraft")},n.onClickSubmit=function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:console.debug("onClickSubmit"),n.verifyInput()&&n.onSubmit();case 2:case"end":return e.stop()}}))},n.onSubmit=function(){var e,t,r,o;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return console.debug("start to submit a new deal"),i.next=3,a.a.awrap(n.appState.createDeal.setCreateDealUploading(!0));case 3:return n.props.onClose(),t=n.appContext.labels.createDealPageV2,i.next=7,a.a.awrap(n.appState.createDeal.setCreateDealProgressMessage(t.uploadingImage));case 7:return i.next=9,a.a.awrap(Promise.all(n.state.files.map((function(e){var t,r,o;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.awrap(n.imageProcessor.imagePrecprocess(e.base64Value));case 2:return r=i.sent,i.next=5,a.a.awrap(n.appContext.serviceExecutor.execute(Object(_.e)(e.type,e.name)));case 5:return o=i.sent,i.next=8,a.a.awrap(n.appContext.serviceExecutor.execute(Object(_.j)(r,null!==(t=o.preSignedUrl)&&void 0!==t?t:"")));case 8:return i.abrupt("return",o.url);case 9:case"end":return i.stop()}}))}))).then((function(e){return e})));case 9:return r=i.sent,i.next=12,a.a.awrap(n.appState.createDeal.setCreateDealProgressMessage(t.uploadingDeal));case 12:return o={address:n.state.selectedAddress,description:n.state.description,filesUrl:r.map((function(e){return null!==e&&void 0!==e?e:""})),serverIdentifierName:null===(e=n.state.selectedAddress)||void 0===e?void 0:e.area,timestamp:0,title:n.state.title},i.next=15,a.a.awrap(n.appContext.serviceExecutor.execute(Object(_.a)(o)));case 15:if(!n.state.selectedAddress){i.next=18;break}return i.next=18,a.a.awrap(n.appContext.serviceExecutor.execute(Object(_.d)(n.state.selectedAddress)).then((function(e){n.appState.deal.setDeals(e.deals)})).then((function(){setTimeout((function(){n.appState.createDeal.setCreateDealUploading(!1)}),5e3)})).catch((function(){console.debug("something weng wrong while creating deal")})));case 18:return i.next=20,a.a.awrap(n.appState.createDeal.setCreateDealProgressMessage(t.uploadCompleted));case 20:case"end":return i.stop()}}))},n.state={files:[],blobFiles:[],description:"",hasAddress:!0,hasField:!0,title:""},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.a.createElement(z,{allowNumberOfFile:9,files:this.state.files,onAddFile:this.onAddFile,onChangeDescription:this.onChangeDescription,onChangeTitle:this.onChangeTitle,onClickAddress:this.onClickAddress,onClickRemoveSelectedAddress:this.onClickRemoveSelectedAddress,onClickSaveDraft:this.onClickSaveDraft,onClickSubmit:this.onClickSubmit,onClose:this.props.onClose,hasAddress:this.state.hasAddress,hasField:this.state.hasField,selectedAddress:this.state.selectedAddress})}},{key:"convertImageToBase64",value:function(e){var t,n=this;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:(t=new FileReader).onload=function(t){t.target&&t.target.result&&n.imageProcessor.fixRotation(t.target.result.toString()).then((function(t){n.setState({files:n.state.files.concat({base64Value:t,name:e.name,type:e.type})})}))},t.readAsDataURL(e);case 3:case"end":return r.stop()}}))}},{key:"verifyInput",value:function(){var e=this.state,t=void 0!==e.selectedAddress,n=""!==e.title||""!==e.description||e.files.length>0;return this.setState({hasAddress:t,hasField:n}),t&&n}}]),t}(p.a)},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r="linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",a={button:{borderRadius:15},color:{black:"black",blueTransparent:"rgba(0,132,255,.1)",green:"#5CC928",greenMedium:"#1EA362",greyDark:"#7D7D7D",greyLight:"#f6f6f6",greyTransparent:"rgba(12, 12, 12, .1)",orange:"#FF4F00",orangeGradient:r,orangeTransparent:"rgb(255, 168, 128, .1)",primaryColor:"#FF4F00",primaryGradient:r,primaryColorTransparent:"rgb(255, 168, 128, .1)",red:"EA4335",redDark:"#DA4B3C",secondaryColor:"#7D7D7D",secondaryColorTransparent:"rgba(12, 12, 12, .1)",systemError:"#F44436",systemInform:"#2196F3",systemSuccess:"#4CAF51",systemWarn:"#FF9800",white:"#FFFFFF"},common:{borderColor:"#f6f6f6"},dimension:{FILL_ALL_HEIGHT:"-webkit-fill-available",FILL_ALL_WIDTH:"-webkit-fill-available"},font:{fontSize:16,primaryFont:"sans-serif"},icon:{fontSize:38,marginLeft:18},remind:{primaryColor:"#5CC928",secondaryColor:"#007AFF"},textField:{borderColor:"#007AFF",borderRadius:15,borderWidth:2}}},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(2),a=n(3),o=n(10),i=n(9),l=n(11),s=n(0),c=n.n(s),d=n(16),u=n(186),p=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(u.a,Object.assign({display:"flex",flexDirection:this.props.isFlexDirectionRow?"row":"column",alignItems:this.props.alignItems?this.props.alignItems:"start",justifyContent:this.props.justifyContent?this.props.justifyContent:"start",onClick:function(){return e.props.onClick?e.props.onClick():{}}},this.props),this.props.children)}}]),t}(d.a)},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(1),a=n(2),o=n(3),i=n(10),l=n(9),s=n(11),c=n(0),d=n.n(c),u=n(51),p=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return d.a.createElement("p",{style:Object(r.a)({},this.getDefaultStyle(),{},this.getDefaultColor(),{},this.props.style)},this.props.children)}},{key:"getDefaultColor",value:function(){return{color:this.getColor()}}},{key:"getColor",value:function(){return u.a.color.black}},{key:"getDefaultStyle",value:function(){return Object(r.a)({},m.defaultStyle,{},this.getStyle())}},{key:"getStyle",value:function(){return m.text}}]),t}(c.Component),m={defaultStyle:{margin:0},text:{fontFamily:u.a.font.primaryFont,fontSize:18,fontWeight:600}}},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),a=n(3),o=n(10),i=n(9),l=n(11),s=n(57),c=n(51),d=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"getColor",value:function(){return c.a.color.greyDark}},{key:"getStyle",value:function(){return u.text}}]),t}(s.a),u={text:{fontSize:15,fontWeight:500}}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),a=n(3),o=n(10),i=n(9),l=n(11),s=n(57),c=n(51),d=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"getColor",value:function(){switch(this.props.color){case"primary":return u.primaryColor.color;case"secondary":return u.secondaryColor.color;case"black":return u.black.color;default:return u.primaryColor.color}}},{key:"getStyle",value:function(){return u.text}}]),t}(s.a),u={primaryColor:{color:c.a.color.primaryColor},secondaryColor:{color:c.a.color.secondaryColor},black:{color:c.a.color.black},text:{fontFamily:c.a.font.primaryFont,fontSize:"0.875rem"}}}}]);
//# sourceMappingURL=14.ce1a233b.chunk.js.map