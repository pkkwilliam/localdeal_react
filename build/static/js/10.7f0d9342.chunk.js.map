{"version":3,"sources":["component/landingPage/dealCardV2.tsx","component/landingPage/dealSection.v2.view.tsx","component/landingPage/landingPage.view.tsx","component/landingPage/landingPage.tsx"],"names":["MAXIMUM_IMAGE_HEIGHT","CollapseCard","getLazyComponent","LazyLoadComponent","DealCardV2","props","CardHeader","address","timestamp","title","isFlexDirectionRow","style","styles","cardContainer","appContext","transformer","timeDifferentCalcualtor","labels","date","unknown","ImageSection","deal","coverImageStyle","state","coverImageLoaded","height","coverImageHeight","empty","expanded","dealIndex","id","fileUrls","filesUrl","length","alt","index","onLoad","onLoadImage","src","onExpand","setState","document","getElementById","clientHeight","console","debug","this","DealCard","bottomToolBarContent","showExpandSign","description","borderBottom","rootContainer","onClick","imageContainer","allowExpand","onClickExpandSign","ApplicationComponent","justifyContent","width","alignItems","marginTop","backgroundColor","styleSchema","color","white","borderColor","greyTransparent","padding","DealSectionView","generatedDeals","deals","map","Component","LandingPageView","BodySection","boxShadow","dealSectionContainer","isLoadingDeals","LoadingDeals","NoDealInArea","noDealInAreaContainer","landingPage","loadingDeals","noDeal","locationButtonContainer","dimension","FILL_ALL_WIDTH","searchButton","remind","secondaryColor","borderRadius","button","borderWidth","LandingPage","isLoading","inputDeals","sort","deal1","deal2","sortedDeal","sortDeals","appState"],"mappings":"yMAeMA,EAAuB,IACvBC,EAAeC,YAAiBC,IAAkBF,cAanCG,E,YACnB,WAAYC,GAAe,IAAD,8BACxB,4CAAMA,KA4CEC,WAAa,YAQhB,IAPLC,EAOI,EAPJA,QACAC,EAMI,EANJA,UACAC,EAKI,EALJA,MAMA,OACE,oCACE,kBAAC,IAAD,CAAMC,oBAAoB,EAAMC,MAAOC,EAAOC,eAC5C,kBAAC,IAAD,KAAKJ,GACL,kBAAC,IAAD,KACGD,EACG,EAAKM,WAAWC,YAAYC,wBAAwBR,GACpD,EAAKM,WAAWG,OAAOC,KAAKC,UAGnCZ,EAAU,kBAAC,IAAD,CAAgBA,QAASA,IAAc,OAhE9B,EAqEhBa,aAAe,WACvB,IAIyB,IAQlB,EAZDC,EAAO,EAAKhB,MAAMgB,KAClBC,EAAkB,EAAKC,MAAMC,iBAC/B,CAAEC,OAAQ,EAAKF,MAAMG,kBACrBd,EAAOe,MACX,OAAI,EAAKJ,MAAMK,SAEX,kBAAC,IAAD,CACEC,UAAS,UAAER,EAAKS,UAAP,QAAa,EACtBC,SAAQ,UAAEV,EAAKW,gBAAP,QAAmB,GAC3BP,OAAQ,EAAKF,MAAMG,oBAIhB,UAAAL,EAAKW,gBAAL,eAAeC,QACpB,yBACEC,IAAK,QACLJ,GAAE,eAAU,EAAKzB,MAAM8B,MAArB,gBACFC,OAAQ,EAAKC,YACbC,IAAKjB,EAAKW,SAAS,GACnBrB,MAAOW,IAEP,MA3FkB,EA+FhBiB,SAAW,WACnB,EAAKC,SAAS,CACZZ,UAAW,EAAKL,MAAMK,YAjGA,EAqGhBS,YAAc,WAAO,IAAD,EACtBZ,EAAM,UAAGgB,SAASC,eAAT,eACL,EAAKrC,MAAM8B,MADN,wBAAH,aAAG,EAEZQ,aACClB,IACFmB,QAAQC,MAAMpB,GACd,EAAKe,SAAS,CACZd,iBACED,EAASzB,EAAuByB,EAASzB,EAC3CwB,kBAAkB,MA5GtB,EAAKD,MAAQ,CACXG,iBAAkB,IAClBF,kBAAkB,EAClBI,UAAU,GALY,E,sEAUxB,OAAO,oCAAGkB,KAAKC,c,iCAIf,IAAM1B,EAAOyB,KAAKzC,MAAMgB,KAClB2B,EAAuB,kBAAC,IAAD,CAAgB3B,KAAMyB,KAAKzC,MAAMgB,OAC1D4B,EACoB,OAArB5B,EAAK6B,aAA6C,KAArB7B,EAAK6B,aACnC7B,EAAKW,SAASC,OAAS,EACzB,OACE,kBAAC,IAAD,CACEkB,aAAc,EACdxC,MAAOC,EAAOwC,cACdC,QAASP,KAAKP,UAEd,uBAAMjC,WAAN,CACEC,QAASc,EAAKd,QACdC,UAAWa,EAAKb,UAChBC,MAAOY,EAAKZ,QAEd,kBAAC,IAAD,CAAME,MAAOC,EAAO0C,gBAClB,uBAAMlC,aAAN,OAEF,kBAACnB,EAAD,CACEsD,YAAaN,EACbD,qBAAsBA,EACtBpB,SAAUkB,KAAKvB,MAAMK,SACrB4B,kBAAmBV,KAAKP,UAEvBlB,EAAK6B,kB,GAxCwBO,KAqHlC7C,EAAS,CACbC,cAAe,CACb6C,eAAgB,gBAChBC,MAAO,WAEThC,MAAO,GACP2B,eAAgB,CACdM,WAAY,SACZF,eAAgB,SAChBG,UAAW,EACXF,MAAO,WAETP,cAAe,CACbU,gBAAiBC,IAAYC,MAAMC,MACnCC,YAAaH,IAAYC,MAAMG,gBAC/BC,QAAS,GACTT,MAAO,YC1JUU,E,iLAEjB,IAAMC,EAAiBxB,KAAKzC,MAAMkE,MAAMC,KAAI,SAACnD,EAAYc,GAAb,OAC1C,kBAAC,EAAD,CAAYd,KAAMA,EAAMc,MAAOA,OAEjC,OAAO,oCAAGmC,O,GAL+BG,aCGxBC,E,kNASnBC,YAAc,WAUZ,OACE,kBAAC,IAAD,CACEC,UAAW,EAAKvE,MAAMkE,MAAMtC,OAAS,EAAI,EACzCtB,MAAOC,EAAOiE,uBAZE,WAClB,OAAI,EAAKxE,MAAMkE,MAAMtC,OACZ,kBAAC,EAAD,CAAmBsC,MAAO,EAAKlE,MAAMkE,QACnC,EAAKlE,MAAMyE,eACb,kBAAC,EAAKC,aAAN,MAEA,kBAAC,EAAKC,aAAN,U,EAabD,aAAe,WACb,OACE,kBAAC,IAAD,CAAMpE,MAAOC,EAAOqE,uBAClB,kBAAC,IAAD,KAAK,EAAKnE,WAAWG,OAAOiE,YAAYC,gB,EAK9CH,aAAe,WACb,OACE,kBAAC,IAAD,CAAMrE,MAAOC,EAAOqE,uBAClB,kBAAC,IAAD,KAAK,EAAKnE,WAAWG,OAAOiE,YAAYE,U,wEAtC5C,OACE,kBAAC,IAAD,CAAMzE,MAAOC,EAAOwC,eAClB,uBAAMuB,YAAN,W,GAJqClB,KA8CvC7C,EAAS,CACbiE,qBAAsB,CACpBjB,WAAY,SACZD,MAAO,QAET0B,wBAAyB,CACvBzB,WAAY,SACZF,eAAgB,UAElBuB,sBAAuB,GACvB7B,cAAe,CACbQ,WAAY,SACZF,eAAgB,SAChBU,QAAS,GACTT,MAAOI,IAAYuB,UAAUC,gBAE/BC,aAAc,CACZtB,YAAaH,IAAY0B,OAAOC,eAChCC,aAAc5B,IAAY6B,OAAOD,aACjC7B,gBAAiBC,IAAY0B,OAAOC,eACpCG,YAAa,I,uDClEIC,E,YACnB,WAAYzF,GAAY,IAAD,8BACrB,4CAAMA,KACDkB,MAAQ,CACXwE,WAAW,GAHQ,E,uEAOHC,GAClB,OAAOA,EAAWC,MAAK,SAACC,EAAOC,GAC7B,OAAOA,EAAM3F,UAAY0F,EAAM1F,e,+BAKjC,IAAM4F,EAAqBtD,KAAKuD,UAC9BvD,KAAKwD,SAASjF,KAAKkD,MAAQzB,KAAKwD,SAASjF,KAAKkD,MAAQ,IAExD,OACE,kBAAC,EAAD,CACEA,MAAO6B,EACPtB,eAAgBhC,KAAKvB,MAAMwE,gB,GArBMtC","file":"static/js/10.7f0d9342.chunk.js","sourcesContent":["import React from \"react\";\nimport Deal, { Address } from \"../../modal/deal\";\nimport {\n  Slider,\n  CardBottomVote,\n  View,\n  styleSchema,\n  H1,\n  H5,\n  AddressDisplay,\n} from \"../../common\";\nimport ApplicationComponent from \"../../common/applicationComponent\";\nimport { getLazyComponent } from \"../../lazyLoad/lazyLoad\";\nimport { LazyLoadComponent } from \"../../lazyLoad/lazyLoadComponent\";\n\nconst MAXIMUM_IMAGE_HEIGHT = 500;\nconst CollapseCard = getLazyComponent(LazyLoadComponent.CollapseCard);\n\ninterface Props {\n  deal: Deal;\n  index: number; // This need to be remove and replace with deal.id!!!\n}\n\ninterface State {\n  coverImageHeight: number;\n  coverImageLoaded: boolean;\n  expanded: boolean;\n}\n\nexport default class DealCardV2 extends ApplicationComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      coverImageHeight: 150,\n      coverImageLoaded: false,\n      expanded: false,\n    };\n  }\n\n  render() {\n    return <>{this.DealCard()}</>;\n  }\n\n  protected DealCard() {\n    const deal = this.props.deal;\n    const bottomToolBarContent = <CardBottomVote deal={this.props.deal} />;\n    let showExpandSign: boolean =\n      (deal.description !== null && deal.description !== \"\") ||\n      deal.filesUrl.length > 1;\n    return (\n      <View\n        borderBottom={1}\n        style={styles.rootContainer}\n        onClick={this.onExpand}\n      >\n        <this.CardHeader\n          address={deal.address}\n          timestamp={deal.timestamp}\n          title={deal.title}\n        />\n        <View style={styles.imageContainer}>\n          <this.ImageSection />\n        </View>\n        <CollapseCard\n          allowExpand={showExpandSign}\n          bottomToolBarContent={bottomToolBarContent}\n          expanded={this.state.expanded}\n          onClickExpandSign={this.onExpand}\n        >\n          {deal.description}\n        </CollapseCard>\n      </View>\n    );\n  }\n\n  protected CardHeader = ({\n    address,\n    timestamp,\n    title,\n  }: {\n    address?: Address;\n    timestamp: number;\n    title: string;\n  }) => {\n    return (\n      <>\n        <View isFlexDirectionRow={true} style={styles.cardContainer}>\n          <H1>{title}</H1>\n          <H5>\n            {timestamp\n              ? this.appContext.transformer.timeDifferentCalcualtor(timestamp)\n              : this.appContext.labels.date.unknown}\n          </H5>\n        </View>\n        {address ? <AddressDisplay address={address} /> : null}\n      </>\n    );\n  };\n\n  protected ImageSection = () => {\n    const deal = this.props.deal;\n    const coverImageStyle = this.state.coverImageLoaded\n      ? { height: this.state.coverImageHeight }\n      : styles.empty;\n    if (this.state.expanded) {\n      return (\n        <Slider\n          dealIndex={deal.id ?? 0}\n          fileUrls={deal.filesUrl ?? []}\n          height={this.state.coverImageHeight}\n        />\n      );\n    } else {\n      return deal.filesUrl?.length ? (\n        <img\n          alt={\"cover\"}\n          id={`deal-${this.props.index} cover-image`}\n          onLoad={this.onLoadImage}\n          src={deal.filesUrl[0]}\n          style={coverImageStyle}\n        />\n      ) : null;\n    }\n  };\n\n  protected onExpand = () => {\n    this.setState({\n      expanded: !this.state.expanded,\n    });\n  };\n\n  protected onLoadImage = () => {\n    const height = document.getElementById(\n      `deal-${this.props.index} cover-image`\n    )?.clientHeight;\n    if (height) {\n      console.debug(height);\n      this.setState({\n        coverImageHeight:\n          height < MAXIMUM_IMAGE_HEIGHT ? height : MAXIMUM_IMAGE_HEIGHT,\n        coverImageLoaded: true,\n      });\n    }\n  };\n}\n\nconst styles = {\n  cardContainer: {\n    justifyContent: \"space-between\",\n    width: \"inherit\",\n  },\n  empty: {},\n  imageContainer: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginTop: 5,\n    width: \"inherit\",\n  },\n  rootContainer: {\n    backgroundColor: styleSchema.color.white,\n    borderColor: styleSchema.color.greyTransparent,\n    padding: 15,\n    width: \"inherit\",\n  },\n};\n","import React, { Component } from \"react\";\nimport Deal from \"../../modal/deal\";\nimport DealCardV2 from \"./dealCardV2\";\n\ninterface Props {\n  deals: Deal[];\n}\n\nexport default class DealSectionView extends Component<Props> {\n  render() {\n    const generatedDeals = this.props.deals.map((deal: Deal, index: number) => (\n      <DealCardV2 deal={deal} index={index} />\n    ));\n    return <>{generatedDeals}</>;\n  }\n}\n","import React from \"react\";\nimport Deal from \"../../modal/deal\";\nimport { H5, styleSchema, View } from \"../../common\";\nimport ApplicationComponent from \"../../common/applicationComponent\";\nimport DealSectionV2View from \"./dealSection.v2.view\";\n\nexport interface Props {\n  deals: Deal[];\n  isLoadingDeals: boolean;\n}\n\nexport default class LandingPageView extends ApplicationComponent<Props> {\n  render() {\n    return (\n      <View style={styles.rootContainer}>\n        <this.BodySection />\n      </View>\n    );\n  }\n\n  BodySection = () => {\n    const displayBody = () => {\n      if (this.props.deals.length) {\n        return <DealSectionV2View deals={this.props.deals} />;\n      } else if (this.props.isLoadingDeals) {\n        return <this.LoadingDeals />;\n      } else {\n        return <this.NoDealInArea />;\n      }\n    };\n    return (\n      <View\n        boxShadow={this.props.deals.length ? 1 : 0}\n        style={styles.dealSectionContainer}\n      >\n        {displayBody}\n      </View>\n    );\n  };\n\n  LoadingDeals = () => {\n    return (\n      <View style={styles.noDealInAreaContainer}>\n        <H5>{this.appContext.labels.landingPage.loadingDeals}</H5>\n      </View>\n    );\n  };\n\n  NoDealInArea = () => {\n    return (\n      <View style={styles.noDealInAreaContainer}>\n        <H5>{this.appContext.labels.landingPage.noDeal}</H5>\n      </View>\n    );\n  };\n}\n\nconst styles = {\n  dealSectionContainer: {\n    alignItems: \"center\",\n    width: \"100%\",\n  },\n  locationButtonContainer: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  noDealInAreaContainer: {},\n  rootContainer: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 15,\n    width: styleSchema.dimension.FILL_ALL_WIDTH,\n  },\n  searchButton: {\n    borderColor: styleSchema.remind.secondaryColor,\n    borderRadius: styleSchema.button.borderRadius,\n    backgroundColor: styleSchema.remind.secondaryColor,\n    borderWidth: 3,\n  },\n};\n","import React from \"react\";\nimport ApplicationComponent from \"../../common/applicationComponent\";\nimport Deal from \"../../modal/deal\";\nimport { LandingPageView } from \".\";\nimport {} from \"../../common/middleware/service\";\nimport \"../../App.css\";\n\nexport interface State {\n  isLoading: boolean;\n}\n\nexport default class LandingPage extends ApplicationComponent<{}, State> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      isLoading: true,\n    };\n  }\n\n  protected sortDeals(inputDeals: Deal[]): Deal[] {\n    return inputDeals.sort((deal1, deal2) => {\n      return deal2.timestamp - deal1.timestamp;\n    });\n  }\n\n  render() {\n    const sortedDeal: Deal[] = this.sortDeals(\n      this.appState.deal.deals ? this.appState.deal.deals : []\n    );\n    return (\n      <LandingPageView\n        deals={sortedDeal}\n        isLoadingDeals={this.state.isLoading}\n      />\n    );\n  }\n}\n"],"sourceRoot":""}