(this.webpackJsonplocal_deal=this.webpackJsonplocal_deal||[]).push([[0],{111:function(e){e.exports=JSON.parse('{"addressDisplay":{"nearBy":"\u9644\u8fd1"},"createDealPage":{"cancel":"\u53d6\u6d88","close":"\u95dc\u9589","create":"\u5275\u5efa","descriptionMissing":"* \u6ca1\u6709\u8a73\u7d30\u554a...","descriptionPlaceHolder":"\u8acb\u52a0\u5165\u5167\u5bb9...","header":"\u5275\u5efa\u597d\u53bb\u8655","textFieldTitle":"\u6a19\u984c","titleMissing":"* \u6ca1\u6709\u6a19\u984c\u554a..."},"date":{"day":"\u65e5","today":"\u4eca\u65e5","unknown":"\u4e0d\u660e"},"header":{"currentLocation":"\u7576\u524d\u5730\u5340:","loading":"Google API \u6b63\u5728\u70ba\u4f60\u5b9a\u4f4d"},"headerMenu":{"bugReportDescription":"\u6b61\u8fce\u544a\u8a34\u6211\u5011\u4efb\u4f55bug\uff0c\u6216\u9700\u8981\u7684\u529f\u80fd","closeButton":"\u95dc\u9589","currentDevelopingFeatuers":["\u5fae\u4fe1\u767b\u5165","Google\u767b\u5165"],"developingFeature":"\u7b49\u5f85\u958b\u767c\u4e2d\u7684\u529f\u80fd:","emailAddress":"pkkwilliam919@gmail.com","moreFeatureIsComingDescription":"\u7522\u54c1\u7d93\u7406\u6b63\u5728\u97ad\u64bb\u7406\u7a0b\u5e8f\u54e1\u63a8\u51fa\u66f4\u591a\u65b0\u529f\u80fd"},"landingPage":{"area":"\u5730\u5340","clickToChange":"\u9ede\u64ca\u66f4\u6539","createDealButton":"\u5275\u5efa\u597d\u53bb\u8655","loadingDeals":"\u6b63\u5728\u5168\u529b\u70ba\u4f60\u8b80\u53d6\u597d\u53bb\u8655","geolocationProvider":"API\u5b9a\u4f4d","noDeal":"\u7db2\u53cb\u5011\u672a\u66fe\u6dfb\u52a0\u597d\u53bb\u8655\uff0c\u8acb\u4f60\u5e6b\u52a9\u6211\u5011\u4e00\u8d77\u8986\u84cb\u9019\u500b\u5340\u57df\u597d\u55ce?"},"localDealCardPage":{"expand":"\u5c55\u958b","collapse":"\u6536\u8d77"},"login":{"formName":"\u767b\u5165","loginNotYetAvaiable":"\u672a\u7528\u5f97\u554a \u7b49\u9663\u5148\u5566","password":"\u5bc6\u78bc","register":"\u6ce8\u518a\u8cec\u865f","submit":"\u767b\u5165","username":"UID/\u7528\u6236\u540d/EMAIL"},"oAuth":{"google":"Google","login":"\u767b\u5165","logout":"\u767b\u51fa","weChat":"\u5fae\u4fe1","undefined":"\u4e0d\u660e"},"position":{"currentArea":"\u6240\u5728\u5730\u5340","loading":"\u6211\u5011\u6b63\u5728\u52aa\u529b\u70ba\u60a8\u8b80\u53d6\u5b9a\u4f4d"},"title":"\u53bb\u908a"}')},120:function(e,t,n){e.exports=n.p+"static/media/logo_icon_character-min.f8d459b6.png"},133:function(e,t,n){e.exports=n(255)},138:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var r,o=n(0),a=n.n(o),i=n(14),l=n.n(i),s=(n(138),n(3)),c=n(4),u=n(7),d=n(6),p=n(8),h=(n(58),n(11));!function(e){e.SET_ADDRESS_PREDICTION="SET_ADDRESS_PREDICTION",e.SET_DEALS="SET_DEAL",e.SET_LOADING_POSITION="SET_LOADING_POSITION",e.SET_GEOLOCATION="SET_GEOLOCATION",e.SET_SELECTED_ADDRESS="SET_SELECTED_ADDRESS",e.SET_USER_PROFILE="SET_USER_PROFILE"}(r||(r={}));var g,m=function(e){return function(t){t({type:r.SET_DEALS,payload:e})}},f=function(e){return function(t){t({type:r.SET_USER_PROFILE,payload:e})}};!function(e){e.GOOGLE="GOOGLE",e.WECHAT="WECHAT",e.NONE="NONE"}(g||(g={}));var b,C={addressesPrediction:[],deals:[],isLoadingPosition:!0,position:{areaName:"",coordinate:{latitude:0,longitude:0}},selectedAddress:{area:"",street1:"",street2:"",city:"",state:"",country:"",zipCode:""},userProfile:{id:0,name:"",imageUrl:"",oAuthProvider:g.NONE}},E=function(e,t){return Object(h.a)({},e,{addressesPrediction:t})},y=function(e,t){return Object(h.a)({},e,{deals:t.deals})},O=function(e,t){return Object(h.a)({},e,{isLoadingPosition:t})},v=function(e,t){return Object(h.a)({},e,{position:{coordinate:t}})},A=function(e,t){return Object(h.a)({},e,{selectedAddress:t})},T=function(e,t){return Object(h.a)({},e,{userProfile:t})},D=n(56),S=[n(109).a],j=Object(D.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(console.log("Redux",t.type),t.type){case r.SET_ADDRESS_PREDICTION:return E(e,t.payload);case r.SET_DEALS:return y(e,t.payload);case r.SET_GEOLOCATION:return v(e,t.payload);case r.SET_LOADING_POSITION:return O(e,t.payload);case r.SET_SELECTED_ADDRESS:return A(e,t.payload);case r.SET_USER_PROFILE:return T(e,t.payload);default:return e}}),D.a.apply(void 0,S)),x=n(17),k=n(15),w=n.n(k);!function(e){e.CREATE_DEAL="CREATE_DEAL",e.CREATE_VOTE="CREATE_VOTE",e.GET_CURRENT_ADDRESS="GET_CURRENT_ADDRESS",e.GET_DEALS="GET_DEALS",e.GET_USER_PROFILE="GET_USER_PROFILE",e.LOGIN_OAUTH_GOOGLE="LOGIN_OAUTH_GOOGLE",e.TEST="TEST",e.UPLOAD_IMAGE="UPLOAD_IMAGE"}(b||(b={}));var L,_=function(e){return{body:JSON.stringify(e),hasMock:!1,isMultipartFileRequest:!1,method:"POST",url:"/deals",serviceName:b.CREATE_DEAL}},I=function(e){return{body:JSON.stringify(e),hasMock:!1,isMultipartFileRequest:!1,method:"POST",url:"/vote",serviceName:b.CREATE_VOTE}},R=function(e){return{hasMock:!0,isMultipartFileRequest:!1,method:"GET",url:"/deals",optionalRequestParam:function(){return"?".concat(N("areaName",e.area||""))},serviceName:b.GET_DEALS}},P=function(e){return{body:e,hasMock:!1,isMultipartFileRequest:!0,method:"POST",url:"/file/multipart",serviceName:b.UPLOAD_IMAGE}},F=function(e){return console.debug("service.ts: generateCurrentAreaRequestParameter -",e),e.areaName?"?".concat(N("areaName",e.areaName)):e.coordinate?"?".concat("latitude","=").concat(e.coordinate.latitude,"&").concat("longitude","=").concat(e.coordinate.longitude):(console.warn("CurrentArea input might be invalid"),"")},M=function(e){var t="?";if(e.length%2===0)for(var n=0;n<e.length;n+=2)0!==n&&(t+="&"),t+="".concat(e[n],"=").concat(e[n+1]);return console.debug("generateUrlParameter:",t),t},N=function(e,t){return"".concat(e,"=").concat(t)},B=function(){function e(t,n,r){var o=this;Object(s.a)(this,e),this.isMock=t,this.serviceUrl=n,this.headers=r,this.generateHeaders=function(e){return e?Object(h.a)({},o.headers):Object(h.a)({},o.headers,{"Content-Type":"application/json"})}}return Object(c.a)(e,[{key:"execute",value:function(e){var t,n,r;return w.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.isMock||!e.hasMock){o.next=4;break}return o.abrupt("return",Promise.resolve(G(e.serviceName)));case 4:return t=this.generateHeaders(e.isMultipartFileRequest),n=e.optionalRequestParam?e.optionalRequestParam():"",r=this.serviceUrl+e.url+n,o.abrupt("return",fetch(r,{body:e.body,credentials:"include",headers:t,method:e.method,mode:"cors"}).then((function(e){return 204===e.status?Promise.resolve():e.json()})).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.warn("Something is wrong while fetch: ",r,e),Promise.reject(e)})));case 8:case"end":return o.stop()}}),null,this)}},{key:"isJsonResponse",value:function(e){try{return JSON.parse(e),!0}catch(t){return!1}}}]),e}(),G=function(e){switch(e){case b.GET_DEALS:return U;case b.GET_CURRENT_ADDRESS:return H;default:return Promise.reject()}},U={deals:[{address:{id:0,street1:"\u8857\u90531",street2:"\u5730\u4e0bB\u5ea7",city:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u885724\u865f",state:"",zipCode:"",country:"\u6fb3\u9580",coordinate:{latitude:113,longitude:234}},description:'<p><img src="https://storage.cloud.google.com/deal_image/1577871875967"></p>',serverIdentifierName:"MACAU",title:"\u6fb3\u9580 \u86cb\u9039\u738b\u5b50",timestamp:1577872077582},{address:{id:0,street1:"\u8857\u90531",street2:"\u5730\u4e0bB\u5ea7",city:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u885724\u865f",state:"",zipCode:"",country:"\u6fb3\u9580",coordinate:{latitude:113,longitude:234}},description:'<p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul>',serverIdentifierName:"MACAU",title:"\u6fb3\u9580 CRAZY \u86cb\u9039\u738b\u5b50",timestamp:1576871229332},{address:{id:0,street1:"\u8857\u90531",street2:"\u5730\u4e0bB\u5ea7",city:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u885724\u865f",state:"",zipCode:"",country:"\u6fb3\u9580",coordinate:{latitude:113,longitude:234}},description:'<p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul><p>\u9019\u500b\u6771\u897f\u4e00\u9ede\u90fd\u4e0d\u597d\u5403\u554a!!!</p><p><br></p><p><img src="https://storage.cloud.google.com/deal_image/1577872169235"></p><p><br></p><ul><li>\u90fd\u662f\u4ee3\u78bc\uff0c\u600e\u9ebd\u5403\u554a???</li></ul>',serverIdentifierName:"MACAU",title:"\u6fb3\u9580 CRAZY \u86cb\u9039\u738b\u5b50",timestamp:1577872407269}]},H=[{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u8857166\u865f",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u8857166\u865f",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u8857148\u865f",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u885790\u865f",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u82b1\u5730\u746a\u5802\u5340",city:"\u82b1\u5730\u746a\u5802\u5340",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580",country:"\u6fb3\u9580"}],V=function(){function e(t){Object(s.a)(this,e),this._lables=t}return Object(c.a)(e,[{key:"timeDifferentCalcualtor",value:function(e){if(e){var t=new Date,n=new Date(e),r=t.getTime()-n.getTime();return this.getLabelAccrodingToTimeDifference(r)}return console.warn("timestamp error: ",e),this._lables.date.unknown}},{key:"getLabelAccrodingToTimeDifference",value:function(e){var t=Math.round(e/864e5);return t>0?"".concat(t).concat(this._lables.date.day):this._lables.date.today}},{key:"getCurrentLocation",value:function(e){navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,r=n.latitude,o=n.longitude;e({latitude:r,longitude:o})}))}}]),e}(),W=n(111);!function(e){e.CONTACT_SHOW_EMAIL="CONTACT_SHOW_EMAIL",e.HEADER_MENU="HEADER_MENU",e.LOGIN_LOCALDEAL="LOGIN_LOCALDEAL",e.LOGIN_GOOGLE_OAUTH="LOGIN_GOOGLE_OAUTH",e.LOGIN_WECHAT_OAUTH="LOGIN_WECHAT_OAUTH"}(L||(L={}));var q=function(){function e(){Object(s.a)(this,e),this.ALLOW_DEAL_REFRESH=!1,this.DEAL_REFRESH_TIME=5e3,this.APIKEY="vKZywb959gExXaEHSwdzdq7MfZu3Nb",this.X_MADT_APPID="localdeal",this.X_MADT_APP_VERSION="0.0.1",this._serviceExecutor=new B(this.isMock,this.serviceUrl,this.headers),this._transformer=new V(this.labels)}return Object(c.a)(e,[{key:"allowDealRefresh",get:function(){return this.ALLOW_DEAL_REFRESH},set:function(e){this.ALLOW_DEAL_REFRESH=e}},{key:"dealRefreshTime",get:function(){return this.DEAL_REFRESH_TIME}},{key:"features",get:function(){return[L.CONTACT_SHOW_EMAIL,L.HEADER_MENU,L.LOGIN_GOOGLE_OAUTH,L.LOGIN_WECHAT_OAUTH]}},{key:"headers",get:function(){return{APIKEY:this.APIKEY,XMADTAPPID:this.X_MADT_APPID,XMADTAPPVERSION:this.X_MADT_APP_VERSION}}},{key:"labels",get:function(){return W}},{key:"isMock",get:function(){return!1}},{key:"isProd",get:function(){return!0}},{key:"oAuthRedirectUrl",get:function(){return this.isProd?"https://liuda.site":"http://127.0.0.1:3000"}},{key:"serviceExecutor",get:function(){return this._serviceExecutor}},{key:"serviceUrl",get:function(){return this.isProd?"https://liuda.site:8082":"http://127.0.0.1:8081"}},{key:"transformer",get:function(){return this._transformer}}]),e}(),z=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o))))._appContext=new q,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"checkOAuth",value:function(){var e=window.location.search,t=new URLSearchParams(e),n=t.get("state"),r=t.get("code"),o=g.NONE,a="";return n===g.GOOGLE&&(o=g.GOOGLE,a=null!==r&&void 0!==r?r:""),{authorizationCode:a,oAuthProvider:o}}},{key:"onOAuthLoginComplete",value:function(){window.history.pushState(null,document.title,"/")}},{key:"appContext",get:function(){return this._appContext}}]),t}(o.Component),J=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onClickCreateDeal=function(){console.debug("onClickCreateDeal"),n.setState({isCreateDealDrawerOpen:!0})},n.onClickHamburgerMenu=function(){console.debug("onClickHamburgerMenu"),n.setState({isHamburgerMenuDrawerOpen:!0})},n.onCloseCreateDeal=function(){console.debug("onCloseCreateDeal"),n.setState({isCreateDealDrawerOpen:!1})},n.onCloseHamburgerMenu=function(){console.debug("onCloseHamburgerMenu"),n.setState({isHamburgerMenuDrawerOpen:!1})},n.onClickLocationButton=function(){console.debug("onClickLocationButton"),n.setState({useAutoLocation:!0})},n.state={isCreateDealDrawerOpen:!1,isHamburgerMenuDrawerOpen:!1,useAutoLocation:!0},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(gt,{isCreateDealDrawerOpen:this.state.isCreateDealDrawerOpen,isHamburgerMenuDrawerOpen:this.state.isHamburgerMenuDrawerOpen,onClickCreateDeal:this.onClickCreateDeal,onClickHamburgerMenu:this.onClickHamburgerMenu,onCloseCreateDeal:this.onCloseCreateDeal,onCloseHamburgerMenu:this.onCloseHamburgerMenu,onClickLocationButton:this.onClickLocationButton,selectedAddress:this.props.selectedAddress})}}]),t}(z),X=Object(x.b)((function(e){return{addressesPrediction:e.addressesPrediction,position:e.position,selectedAddress:e.selectedAddress}}),{setUserProfile:f})(J),Y=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(Ve,{isFlexDirectionRow:!0},a.a.createElement(pe,null,this.generateAddressWithSpace(this.props.address)))}},{key:"generateAddressWithSpace",value:function(e){e.street1,e.street2,e.city,e.state,e.zipCode,e.country;return e.formattedAddress||""}},{key:"removeNotValidAddress",value:function(e){return e?"".concat(e," "):""}}]),t}(z),K={button:{borderRadius:15},color:{black:"black",blueTransparent:"rgba(0,132,255,.1)",green:"#5CC928",greenMedium:"#1EA362",greyDark:"#7D7D7D",greyLight:"#f6f6f6",greyTransparent:"rgba(12, 12, 12, .1)",orange:"#FF4F00",orangeTransparent:"rgb(255, 168, 128, .1)",primaryColor:"#FF4F00",primaryColorTransparent:"rgb(255, 168, 128, .1)",red:"red",redDark:"#DA4B3C",secondaryColor:"#7D7D7D",secondaryColorTransparent:"rgba(12, 12, 12, .1)",white:"#FFFFFF"},common:{borderColor:"#f6f6f6"},dimension:{FILL_ALL_HEIGHT:"-webkit-fill-available",FILL_ALL_WIDTH:"-webkit-fill-available"},font:{fontSize:16,white:"#FFFFFF"},icon:{fontSize:38,marginLeft:18},remind:{primaryColor:"#5CC928",secondaryColor:"#007AFF"},textField:{borderColor:"#007AFF",borderRadius:15,borderWidth:2}},Z=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e="secondary"===this.props.theme?$.secondaryTheme:$.primaryTheme;return a.a.createElement(Ve,{style:Object(h.a)({},$.rootContainer,{},e,{},this.props.styles)},this.props.children)}}]),t}(o.Component),$={rootContainer:{alignItems:"center",backgroundColor:K.color.primaryColorTransparent,borderRadius:8,width:K.dimension.FILL_ALL_WIDTH},primaryTheme:{backgroundColor:K.color.primaryColorTransparent},secondaryTheme:{backgroundColor:K.color.secondaryColorTransparent}},Q=n(289),ee=n(290),te=n(302),ne=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).VoteButton=function(e){var t=e.voteCount,r=e.voteUpIcon,o=null,i=null;n.state.voted?(o=oe.VotedButtonContainer,i=Object(h.a)({},oe.mainIconStyle,{},oe.votedIcon)):(o=oe.VoteButtonContainer,i=Object(h.a)({},oe.mainIconStyle,{},oe.voteIcon));var l=r?n.onPressUpVote:n.onPressDownVote;return a.a.createElement(Ve,{style:Object(h.a)({},oe.buttonContainer,{},o)},a.a.createElement(te.a,{disabled:n.state.voted,onClick:l,style:oe.iconButton},r?a.a.createElement(Q.a,{style:i}):a.a.createElement(ee.a,{style:i})),a.a.createElement(pe,{style:oe.componentStyle},t))},n.onPressDownVote=function(){n.createVoteRequest(!1)},n.onPressUpVote=function(){n.createVoteRequest(!0)},n.createVoteRequest=function(e){var t,r,o;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t=n.props.deal,r=t.id,o=t.serverIdentifierName,!n.state.voted&&r&&o&&n.appContext.serviceExecutor.execute(I({id:r,upVote:e,serverIdentifierName:o})).then((function(e){n.setState({voted:!0}),n.props.setDeals(e)}));case 2:case"end":return a.stop()}}))},n.state={voted:!1},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,n=null!==(e=null===(t=this.props.deal)||void 0===t?void 0:t.vote)&&void 0!==e?e:{},r=n.downVote,o=n.upVote;return a.a.createElement(Ve,{isFlexDirectionRow:!0,style:oe.rootContainer},a.a.createElement(this.VoteButton,{voteCount:null!==o&&void 0!==o?o:0,voteUpIcon:!0}),a.a.createElement(this.VoteButton,{voteCount:null!==r&&void 0!==r?r:0,voteUpIcon:!1}))}}]),t}(z),re=Object(x.b)((function(e){return{selectedAddress:e.selectedAddress}}),{setDeals:m})(ne),oe={buttonContainer:{alignItems:"center",borderRadius:5,flexDirection:"row",marginLeft:5,marginRight:5},componentStyle:{paddingRight:10},mainIconStyle:{fontSize:22,paddingTop:2,paddingBottom:2},iconButton:{padding:0},rootContainer:{alignItems:"center",marginTop:10},VotedButtonContainer:{backgroundColor:K.color.secondaryColorTransparent},VoteButtonContainer:{backgroundColor:K.color.primaryColorTransparent},votedIcon:{color:K.color.secondaryColor},voteIcon:{color:K.color.primaryColor}},ae=n(304),ie=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(ae.a,this.props,a.a.createElement(Ve,{style:le.rootContainer},this.props.children))}}]),t}(o.Component),le={rootContainer:{alignItems:"center",justifyContent:"space-between",height:"inherit",paddingLeft:15,paddingRight:15,width:K.dimension.FILL_ALL_WIDTH}},se=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("p",{style:Object(h.a)({},this.getDefaultStyle(),{},this.getDefaultColor(),{},this.props.style)},this.props.children)}},{key:"getDefaultColor",value:function(){return{color:this.getColor()}}},{key:"getColor",value:function(){return K.color.black}},{key:"getDefaultStyle",value:function(){return Object(h.a)({},ce.defaultStyle,{},this.getStyle())}},{key:"getStyle",value:function(){return ce.text}}]),t}(o.Component),ce={defaultStyle:{margin:0,marginTop:2},text:{fontSize:18,fontWeight:600}},ue=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getColor",value:function(){return K.color.primaryColor}},{key:"getStyle",value:function(){return de.text}}]),t}(se),de={text:{fontSize:15,fontWeight:500}},pe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getColor",value:function(){return K.color.greyDark}},{key:"getStyle",value:function(){return he.text}}]),t}(se),he={text:{fontSize:15,fontWeight:500}},ge=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t;return a.a.createElement("img",{alt:null!==(e=null===(t=this.props)||void 0===t?void 0:t.alt)&&void 0!==e?e:"image",src:this.props.src,style:Object(h.a)({},me.defaultStyle,{},this.getImageSizeStyle())})}},{key:"getImageSizeStyle",value:function(){switch(this.props.size){case"big":return me.bigImage;case"medium":return me.mediumImage;default:return me.smallImage}}}]),t}(o.Component),me={bigImage:{width:100},defaultStyle:{borderRadius:5},mediumImage:{width:75},smallImage:{width:50}},fe=n(293),be=n(294),Ce=function(e){function t(e){var n,r=this;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).contentRef=null,n.BottomToolBar=function(){return a.a.createElement(Ve,{isFlexDirectionRow:!0,style:Ee.bottonToolBar},a.a.createElement(Ve,{style:{alignSelf:"flex-start"}},n.props.children),a.a.createElement(Ve,{style:{alignSelf:"flex-end"}},a.a.createElement(r.ExpandSign,null)))},n.ExpandLessSign=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(pe,{style:{color:K.color.primaryColor}},n.appContext.labels.localDealCardPage.collapse),a.a.createElement(fe.a,{style:Ee.expandSignIcon}))},n.ExpandMoreSign=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ue,null,n.appContext.labels.localDealCardPage.expand),a.a.createElement(be.a,{style:Ee.expandSignIcon}))},n.ExpandSign=function(){return n.state.contentNeedCollapse?a.a.createElement(te.a,{onClick:n.onClickedContent,style:Ee.expandSignButton},n.state.isCollapsed?a.a.createElement(r.ExpandMoreSign,null):a.a.createElement(r.ExpandLessSign,null)):null},n.ContentBody=function(e){var t=e.content,r=e.contentNeedCollapse,o=e.isCollapsed,i=r&&o?Ee.contentCollapsedStyle:Ee.contentOpenedStyle;return a.a.createElement(Ve,{style:Object(h.a)({},Ee.contentContainer,{},i),onClick:n.onClickedContent},a.a.createElement("div",{style:{width:"inherit"},ref:function(e){n.contentRef=e}},t))},n.onClickedContent=function(){n.setState({isCollapsed:!n.state.isCollapsed})},n.state={contentNeedCollapse:!0,isCollapsed:!0},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t;this.setState({contentNeedCollapse:(null!==(e=null===(t=this.contentRef)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:0)>180})}},{key:"render",value:function(){return a.a.createElement(Ve,{borderBottom:1,style:Ee.rootContainer},a.a.createElement(this.ContentBody,{content:this.props.contents,contentNeedCollapse:this.state.contentNeedCollapse,isCollapsed:this.state.isCollapsed}),a.a.createElement(this.BottomToolBar,null))}}]),t}(z),Ee={bottonToolBar:{justifyContent:"space-between",width:"inherit"},contentCollapsedStyle:{height:"150px",overflow:"hidden"},contentContainer:{width:K.dimension.FILL_ALL_WIDTH},contentOpenedStyle:{},expandSignButton:{backgroundColor:K.color.primaryColorTransparent,padding:0,paddingLeft:15,paddingRight:5},expandSignIcon:{color:K.color.primaryColor},rootContainer:{backgroundColor:K.color.white,borderColor:K.common.borderColor,padding:20,width:K.dimension.FILL_ALL_WIDTH}},ye=n(301),Oe=n(256),ve=n(10),Ae=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).RegularInputTextField=function(){var e,t=null!==(e=n.props.text?n.props.text:n.props.placeHolder)&&void 0!==e?e:"";return a.a.createElement(Oe.a,{error:n.props.isError,onChange:function(e){return n.props.onChange(e.target.value)},placeholder:t,style:Object(h.a)({},Te.textFieldStyle,{},n.props.style)})},n.NewStyleTextField=function(){var e=n.props.onBlur?n.props.onBlur:function(){},t=n.props.onFocus?n.props.onFocus:function(){};return a.a.createElement(ye.a,{color:"secondary",defaultValue:n.props.defaultValue,label:n.props.text,onBlur:function(){return e()},onChange:function(e){return n.props.onChange(e.target.value)},onFocus:function(){return t()},style:Object(h.a)({},Te.textFieldStyle,{},n.props.style),variant:"outlined"},n.props.children)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(this.RegularInputTextField,null)}}]),t}(z),Te={textFieldStyle:{paddingTop:15,width:"inherit"}},De=Object(ve.a)(function(e){var t=e.textField;return{notchedOutline:{borderColor:t.borderColor,borderRadius:t.borderRadius,borderWidth:t.borderWidth}}}(K))(Ae),Se=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={backgroundColor:this.props.isDisable?K.color.greyDark:K.color.primaryColor};return a.a.createElement(te.a,Object.assign({style:Object(h.a)({},e,{},je.buttonStyle,{},this.props.styles)},this.props),a.a.createElement("p",{style:je.text},this.props.text))}}]),t}(o.Component),je={buttonStyle:{borderRadius:25,marginLeft:20,marginRight:20,width:"inherit"},text:{color:K.color.white,fontSize:15,fontWeight:600,margin:0}},xe=n(114),ke=n.n(xe),we=(n(247),n(115)),Le=n.n(we),_e=n(116),Ie=n(117),Re=n.n(Ie),Pe=[[{color:[]}],["bold","italic","strike",{header:[1,!1]},{align:[]}],["image"],["link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Fe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).quillRef=void 0,n.imageHandler=function(e){var t,r,o,a,i;return w.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return console.debug("enter image handler function"),console.debug("original"),n.removePreviousInput(),l.next=5,w.a.awrap(n.fixRotation(e,n.guessImageMime(e)));case 5:return t=l.sent,l.next=8,w.a.awrap(n.transferToBlob(t));case 8:return r=l.sent,l.next=11,w.a.awrap(n.getImageInfo(r));case 11:return o=l.sent,l.next=14,w.a.awrap(n.imageResize(r,o.type,o.height,o.width/5,10));case 14:a=l.sent,console.debug("processed"),n.getImageInfo(a),(i=new FormData).append("image",a,"image"),n.appContext.serviceExecutor.execute(P(i)).then((function(e){n.onImageSucceedUpload(e.url)}));case 20:case"end":return l.stop()}}))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(ke.a,{ref:function(t){return e.quillRef=t},modules:this.modules(),onChange:function(t,n,r,o){var a;"user"===r&&((null===(a=n.ops)||void 0===a?void 0:a.length)&&n.ops.forEach((function(t){Object(_e.isObject)(t.insert)&&t.insert.image&&(console.debug("got image"),e.imageHandler(t.insert.image))})));e.props.onChangeValue(t)},placeholder:this.appContext.labels.createDealPage.descriptionPlaceHolder,style:Object(h.a)({},Me.quillStyle,{},this.props.style)})}},{key:"createNewFormData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"content",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"newFile";console.debug("create new FormData object");var r=new FormData;return r.append(t,e,n),r}},{key:"fixRotation",value:function(e,t){return new Promise((function(n,r){Re()(e,(function(e){return n(e.toDataURL(t))}),{orientation:!0})}))}},{key:"getCurrentIndex",value:function(){return this.quillRef.getEditor().getSelection().index}},{key:"getImageInfo",value:function(e){return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Image;r.src=URL.createObjectURL(e),r.onload=function(){return console.debug("type:".concat(e.type," size:").concat(e.size," height:").concat(r.height," width:").concat(r.width)),t({height:r.height,size:e.size,type:e.type,width:r.width})}})));case 1:case"end":return t.stop()}}))}},{key:"imageResize",value:function(e,t,n,r,o){return new Promise((function(a,i){Le.a.imageFileResizer(e,r,n,t,o,0,(function(e){a(e)}),"blob")}))}},{key:"centerAlignLine",value:function(){var e=this.getCurrentIndex();this.quillRef.getEditor().formatLine(e,e+1,"align","center")}},{key:"leftAlignLine",value:function(){var e=this.getCurrentIndex();this.quillRef.getEditor().formatLine(e,e+1,"align","")}},{key:"createImageElement",value:function(e){var t=document.createElement("img");return t.src=e,t.setAttribute("style","width:10px"),t}},{key:"createNewLine",value:function(){this.quillRef.getEditor().insertText(this.getCurrentIndex(),"\n")}},{key:"transferToBlob",value:function(e){return new Promise((function(t,n){return fetch(e).then((function(e){return e.blob()})).then((function(e){return t(e)}))}))}},{key:"guessImageMime",value:function(e){return"/"===e.charAt(0)?"image/jpeg":"R"===e.charAt(0)?"image/gif":"i"===e.charAt(0)?"image/png":""}},{key:"modules",value:function(){return{toolbar:{container:Pe}}}},{key:"onImageSucceedUpload",value:function(e){return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.quillRef.getEditor().insertEmbed(this.getCurrentIndex(),"image",e),this.setCursorAtNextIndex(),this.centerAlignLine(),this.createNewLine(),this.leftAlignLine();case 5:case"end":return t.stop()}}),null,this)}},{key:"removePreviousInput",value:function(){var e=this.getCurrentIndex();console.debug("remove content at index:",e),this.quillRef.getEditor().deleteText(e,e+1)}},{key:"setCursorAtNextIndex",value:function(){var e=this.getCurrentIndex();this.quillRef.getEditor().setSelection(e+1,e+1)}}]),t}(z),Me={quillStyle:{borderRadius:5,width:"inherit"}},Ne=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(te.a,Object.assign({onClick:this.props.onClick,style:Be.buttonStyle,variant:"text"},this.props),this.props.text,this.props.children)}}]),t}(o.Component),Be={buttonStyle:{color:K.color.primaryColor,marginTop:10,paddingBottom:2,paddingTop:2}},Ge=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClickPrimaryButton,n=e.onClickSecondaryButton,r=e.primaryButtonLabel,o=e.secondaryButtonLabel;return a.a.createElement(Ve,{isFlexDirectionRow:!0,style:Object(h.a)({},Ue.rootContainer,{},this.props.style)},a.a.createElement(te.a,{onClick:function(){return t()},style:Ue.primaryButton,variant:"outlined"},a.a.createElement(pe,{style:Ue.primaryButtonText},r)),a.a.createElement(te.a,{onClick:function(){return n()},variant:"outlined"},a.a.createElement(pe,null,o)))}}]),t}(z),Ue={rootContainer:{justifyContent:"space-around",marginLeft:20,marginRight:20,width:"inherit"},primaryButton:{backgroundColor:K.color.primaryColor},primaryButtonText:{color:K.color.white}},He=n(300),Ve=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(He.a,Object.assign({display:"flex",flexDirection:this.props.isFlexDirectionRow?"row":"column",alignItems:this.props.alignItems?this.props.alignItems:"start",justifyContent:this.props.justifyContent?this.props.justifyContent:"start",onClick:function(){return e.props.onClick?e.props.onClick():{}}},this.props),this.props.children)}}]),t}(z),We=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).AddressSection=function(){return a.a.createElement(Ve,{style:qe.addressSectionContainer},n.props.useAutoPosition?a.a.createElement(r.AddressAutoPositionDisplay,null):a.a.createElement(r.AddressTextField,null))},n.AddressAutoPositionDisplay=function(){return a.a.createElement(Y,{address:n.props.currentAddress})},n.AddressTextField=function(){return null},n.ButtonSection=function(){var e=n.appContext.labels.createDealPage;return a.a.createElement(Ge,{onClickPrimaryButton:function(){return n.props.onClickSubmit()},onClickSecondaryButton:function(){return n.props.onClickClose()},primaryButtonLabel:e.create,secondaryButtonLabel:e.cancel,style:qe.buttonSection})},n.DescriptionTextField=function(){return a.a.createElement(Ve,{style:qe.descriptionContainer},a.a.createElement(r.DescriptionMissing,null),a.a.createElement(Fe,{onChangeValue:n.props.onChangeRichTextValue,style:qe.richTextEditor}))},n.DescriptionMissing=function(){return n.props.hasDescription?null:a.a.createElement(r.MissingContentText,{label:n.appContext.labels.createDealPage.descriptionMissing})},n.HeaderSection=function(){var e=n.appContext.labels.createDealPage;return a.a.createElement(Ve,{style:qe.headerContainer,isFlexDirectionRow:!0},a.a.createElement(se,null,e.header),a.a.createElement(te.a,{onClick:function(){return n.props.onClickClose()}},a.a.createElement(pe,null,e.close)))},n.HourOfOperationSection=function(){return null},n.MissingContentText=function(e){var t=e.label;return a.a.createElement(pe,{style:qe.missingContentText},t)},n.TitleMissing=function(){return n.props.hasTitle?null:a.a.createElement(r.MissingContentText,{label:n.appContext.labels.createDealPage.titleMissing})},n.TitleTextField=function(){return a.a.createElement(Ve,{style:qe.titleTextFiledContainer},a.a.createElement(r.TitleMissing,null),a.a.createElement(De,{onChange:n.props.onChangeTitleTextField,text:n.appContext.labels.createDealPage.textFieldTitle,style:qe.titleTextField}))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(Ve,{style:qe.rootContainer},a.a.createElement(this.HeaderSection,null),a.a.createElement(this.AddressSection,null),a.a.createElement(this.TitleTextField,null),a.a.createElement(this.HourOfOperationSection,null),a.a.createElement(this.DescriptionTextField,null),a.a.createElement(this.ButtonSection,null))}}]),t}(z),qe={addressSectionContainer:{marginTop:5,width:"inherit"},buttonSection:{margin:10},headerContainer:{alignItems:"center",justifyContent:"space-between",marginTop:10,width:"100%"},missingContentText:{color:K.color.red,marginTop:5},descriptionContainer:{marginTop:10,width:"inherit"},richTextEditor:{marginTop:5},rootContainer:{alignItems:"center",justifyContent:"center",width:K.dimension.FILL_ALL_WIDTH},titleTextField:{marginTop:5},titleTextFiledContainer:{justifyContent:"center",marginTop:10,width:"inherit"}},ze=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChangeRichTextValue=function(e){n.setState({richTextValue:e})},n.onChangeTitleTextField=function(e){n.setState({title:e})},n.onClickSubmit=function(){return w.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.awrap(n.validateDescription());case 2:return e.next=4,w.a.awrap(n.validateTitle());case 4:if(!n.state.hasDescription||!n.state.hasTitle){e.next=10;break}return e.next=7,w.a.awrap(n.appContext.serviceExecutor.execute(_(n.generateDeal())));case 7:return n.props.onClickClose(),e.next=10,w.a.awrap(n.appContext.serviceExecutor.execute(R(n.props.currentAddress)).then((function(e){return n.props.setDeals(e)})));case 10:case"end":return e.stop()}}))},n.state={hasTitle:!0,hasDescription:!0,richTextValue:"",title:"",useAutoPosition:!0},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(We,{currentAddress:this.props.currentAddress,hasDescription:this.state.hasDescription,hasTitle:this.state.hasTitle,onChangeRichTextValue:this.onChangeRichTextValue,onChangeTitleTextField:this.onChangeTitleTextField,onClickClose:function(){return e.props.onClickClose()},onClickSubmit:this.onClickSubmit,useAutoPosition:this.state.useAutoPosition})}},{key:"generateDeal",value:function(){return{address:this.props.currentAddress,description:this.state.richTextValue,serverIdentifierName:"",timestamp:0,title:this.state.title}}},{key:"validateDescription",value:function(){this.setState({hasDescription:this.state.richTextValue.length>0})}},{key:"validateTitle",value:function(){this.setState({hasTitle:this.state.title.length>0})}}]),t}(z),Je=Object(x.b)((function(e){return{currentAddress:e.selectedAddress}}),{setDeals:m})(ze),Xe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onSelectAddress=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n.props.addressPrediction){var t=n.props.addressPrediction[e];n.props.setSelectedAddress(t)}},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.setDefaultSelectedAddress(),null}},{key:"setDefaultSelectedAddress",value:function(){this.props.addressPrediction.length>0&&!this.props.selectedAddress.area&&this.onSelectAddress()}}]),t}(z),Ye=Object(x.b)((function(e){return{addressPrediction:e.addressesPrediction,isPositionLoading:e.isLoadingPosition,selectedAddress:e.selectedAddress}}),{setDeals:m,setSelectedAddress:function(e){return function(t){t({type:r.SET_SELECTED_ADDRESS,payload:e})}}})(Xe),Ke=(n(305),n(306),n(113),n(120)),Ze=n.n(Ke),$e=n(297),Qe=n(298),et=n(307),tt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(et.a,{disableTouchListener:!0,title:this.props.title},a.a.createElement(te.a,{style:{padding:0,minWidth:0}},this.props.children))}}]),t}(o.Component),nt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onClickMenu=function(){n.setState({isMenuOpen:!0})},n.onCloseMenu=function(){n.setState({isMenuOpen:!1})},n.state={isMenuOpen:!1},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(pt,{isMenuOpen:this.state.isMenuOpen,onClickMenu:this.onClickMenu,onCloseMenu:this.onCloseMenu})}}]),t}(z),rt=n(296),ot=n(308),at=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChangePassword=function(e){console.debug("onChangePassword")},n.onChangeUsername=function(e){console.debug("onChangeUsername")},n.onClickSubmit=function(){console.debug("onClickSubmit")},n.state={password:"",username:""},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(it,{onChangePassword:this.onChangePassword,onChangeUsername:this.onChangeUsername,onClickSubmit:this.onClickSubmit,password:this.state.password,username:this.state.username})}}]),t}(z),it=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).Container=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Z,null,a.a.createElement(r.Header,null),a.a.createElement(r.UsernameTextField,null),a.a.createElement(r.PasswordTextField,null),a.a.createElement(r.SubmitButton,null)))},n.Header=function(){return a.a.createElement(Ve,{style:lt.headerContainer},a.a.createElement(ue,null,n.appContext.labels.login.formName))},n.PasswordTextField=function(){return a.a.createElement(De,{onChange:n.props.onChangePassword,text:n.appContext.labels.login.password})},n.SubmitButton=function(){return a.a.createElement(Se,{disabled:!0,isDisable:!0,styles:lt.submitButton,text:n.appContext.labels.login.loginNotYetAvaiable})},n.UsernameTextField=function(){return a.a.createElement(De,{onChange:n.props.onChangeUsername,text:n.appContext.labels.login.username})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=[];return this.appContext.features.includes(L.LOGIN_LOCALDEAL)&&e.push(a.a.createElement(this.Container,null)),e}}]),t}(z),lt={headerContainer:{width:"inherit"},submitButton:{marginTop:15},rootContainer:{alignItems:"center",backgroundColor:K.color.primaryColorTransparent,borderRadius:5,padding:10,marginTop:20,width:K.dimension.FILL_ALL_WIDTH}},st=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(ut,{userProfile:this.props.userProfile})}}]),t}(z),ct=Object(x.b)((function(e){return{userProfile:e.userProfile}}))(st),ut=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).Container=function(){var e=n.props.userProfile.oAuthProvider!==g.NONE?a.a.createElement(r.UserProfileSection,null):a.a.createElement(r.OAuthLoginOptions,null);return a.a.createElement(Z,{theme:"primary"},e)},n.GoogleOAuthLoginIcon=function(){return a.a.createElement(te.a,null,a.a.createElement(ot.a,{href:n.getGoogleOAuthRequestURL()},"Google"))},n.OAuthLoginOptions=function(){return a.a.createElement(r.GoogleOAuthLoginIcon,null)},n.UserProfileSection=function(){var e=n.props.userProfile;return a.a.createElement(Ve,{isFlexDirectionRow:!0,style:dt.rootContainer},a.a.createElement(ge,{src:e.imageUrl}),a.a.createElement(Ve,null,a.a.createElement(ue,null,n.getProviderLabel(e.oAuthProvider)),a.a.createElement(ue,null,e.name)))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(this.Container,null)}},{key:"getGoogleOAuthRequestURL",value:function(){var e="https://accounts.google.com/o/oauth2/v2/auth?scope=profile&access_type=offline&include_granted_scopes=true&response_type=code&state=GOOGLE&redirect_uri=".concat(this.appContext.oAuthRedirectUrl,"&client_id=965687889406-d0pqe0hr6i3c4uo18rr5j0spqq73phth.apps.googleusercontent.com");return console.log(e),e}},{key:"getProviderLabel",value:function(e){var t=this.appContext.labels.oAuth;switch(e){case g.GOOGLE:return t.google;case g.WECHAT:return t.weChat;default:return t.undefined}}}]),t}(z),dt={rootContainer:{alignItems:"center",justifyContent:"space-around",padding:10,width:"inherit"}},pt=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).CloseButton=function(){return a.a.createElement(Ne,{onClick:n.props.onCloseMenu,text:n.appContext.labels.headerMenu.closeButton})},n.ContactInfomation=function(){var e=n.appContext.labels.headerMenu.emailAddress;return n.appContext.features.includes(L.CONTACT_SHOW_EMAIL)?a.a.createElement(ot.a,{href:"mailto:".concat(e),underline:"none"},a.a.createElement(ue,null,e)):null},n.DevelopingFeatures=function(){var e=n.appContext.labels.headerMenu.currentDevelopingFeatuers.map((function(e,t){return a.a.createElement(pe,null,"".concat(t+1,") ").concat(e))}));return a.a.createElement(Ve,{style:ht.developingFeatureContainer},a.a.createElement(pe,null,n.appContext.labels.headerMenu.developingFeature),e)},n.LowerPortion=function(){return a.a.createElement(Ve,{style:ht.lowerPortionContainer},a.a.createElement(r.ContactInfomation,null),a.a.createElement(r.CloseButton,null))},n.MenuContainer=function(){return a.a.createElement(Ve,{style:ht.menuContainer},a.a.createElement(r.UpperPortion,null),a.a.createElement(r.LowerPortion,null))},n.UpperPortion=function(){var e=n.appContext.labels.headerMenu;return a.a.createElement(Ve,{style:ht.upperPortionContainer},a.a.createElement(pe,null,e.moreFeatureIsComingDescription),a.a.createElement(r.DevelopingFeatures,null),a.a.createElement(pe,null,e.bugReportDescription),a.a.createElement(at,null),a.a.createElement(Ve,{style:ht.oAuthContainer},a.a.createElement(ct,null)))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.appContext.features.includes(L.HEADER_MENU)?a.a.createElement(Ve,{borderLeft:1,style:ht.menuIconContainer},a.a.createElement(rt.a,{style:ht.menuIcon,onClick:this.props.onClickMenu}),a.a.createElement(ie,{anchor:"right",onClose:this.props.onCloseMenu,open:this.props.isMenuOpen},a.a.createElement(this.MenuContainer,null))):null}}]),t}(z),ht={developingFeatureContainer:{padding:15},lowerPortionContainer:{alignItems:"center",paddingTop:20,paddingBottom:20},menuIconContainer:{borderColor:K.color.greyTransparent,marginLeft:18},menuIcon:Object(h.a)({color:K.color.greyDark},K.icon),menuContainer:{alignItems:"center",height:"inherit",justifyContent:"space-between",width:"inherit"},oAuthContainer:{marginTop:20,width:"inherit"},upperPortionContainer:{alignItems:"center",paddingTop:20,width:"inherit"}},gt=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).CreateDealDrawer=function(){return a.a.createElement(ie,{anchor:"top",onClose:n.props.onCloseCreateDeal,open:n.props.isCreateDealDrawerOpen},a.a.createElement(Je,{onClickClose:n.props.onCloseCreateDeal}))},n.CreateNewDealButton=function(){return a.a.createElement($e.a,{onClick:n.props.onClickCreateDeal,style:mt.createNewDealIcon})},n.HeaderTextAndLogo=function(){return a.a.createElement(Ve,null,a.a.createElement("img",{alt:"app-logo",src:Ze.a,style:{width:100}}))},n.LocationButton=function(){n.props.selectedAddress&&n.props.selectedAddress.area;return a.a.createElement(Qe.a,{style:mt.locationIcon})},n.TopBarSection=function(){var e=n.appContext.labels.header;return a.a.createElement(Ve,{isFlexDirectionRow:!0,style:mt.buttonContainer},a.a.createElement(r.CreateNewDealButton,null),a.a.createElement(tt,{title:"".concat(e.currentLocation," ").concat(n.props.selectedAddress.area?n.props.selectedAddress.area:e.loading)},a.a.createElement(r.LocationButton,null)),a.a.createElement(nt,null))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(Ve,{boxShadow:1,isFlexDirectionRow:!0,style:mt.rootContainer},a.a.createElement(Ye,null),a.a.createElement(this.CreateDealDrawer,null),a.a.createElement(this.HeaderTextAndLogo,null),a.a.createElement(this.TopBarSection,null))}}]),t}(z),mt={buttonContainer:{alignItems:"center",justifyContent:"space-between"},circularProgress:{marginLeft:5},createNewDealIcon:Object(h.a)({color:K.color.primaryColor},K.icon),createNewButton:{borderColor:K.color.secondaryColor,borderRadius:K.button.borderRadius,borderWidth:3},locationButtonContainer:{alignItems:"center",justifyContent:"center"},locationIcon:Object(h.a)({color:K.color.greenMedium},K.icon),rootContainer:{alignItems:"center",backgroundColor:K.color.white,borderColor:K.color.greyDark,justifyContent:"space-between",padding:15},searchMethodLabel:{backgroundColor:K.remind.primaryColor,borderColor:K.remind.primaryColor,borderRadius:K.button.borderRadius,marginRight:10,borderWidth:3,paddingBottom:5,paddingTop:5}},ft=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).BodySection=function(){return a.a.createElement(r.DealsSection,null)},n.DealsSection=function(){var e=(n.props.deals?n.props.deals:[]).map((function(e){var t=n.generateCardContent(e);return a.a.createElement(Ce,{contents:t,onClick:function(){return n.props.onClickCard()},title:e.title},a.a.createElement(re,{deal:e}))}));return a.a.createElement(Ve,{boxShadow:e.length?1:0,style:bt.dealSectionContainer},(function(){return e.length?e:n.props.isLoadingDeals?a.a.createElement(r.LoadingDeals,null):a.a.createElement(r.NoDealInArea,null)}))},n.LoadingDeals=function(){return a.a.createElement(Ve,{style:bt.noDealInAreaContainer},a.a.createElement(pe,null,n.appContext.labels.landingPage.loadingDeals))},n.NoDealInArea=function(){return a.a.createElement(Ve,{style:bt.noDealInAreaContainer},a.a.createElement(pe,null,n.appContext.labels.landingPage.noDeal))},n.TextFieldArea=function(){return a.a.createElement(De,{defaultValue:n.props.textFieldValue,onBlur:function(){return n.props.onBlurTextField()},onChange:function(e){return n.props.onChangeSearchTextField(e)},onFocus:function(){return n.props.onFocusTextField()},text:n.appContext.labels.landingPage.area})},n.generateCardContent=function(e){var t=e.address,r=(e.category,e.discussions,e.description),o=e.title,i=(e.timeAvailable,e.timestamp);e.vote;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ve,{isFlexDirectionRow:!0,style:bt.cardContainer},a.a.createElement(se,null,o),a.a.createElement(pe,null,i?n.appContext.transformer.timeDifferentCalcualtor(i):n.appContext.labels.date.unknown)),a.a.createElement(Ve,{style:bt.detailSectionContainer},a.a.createElement(Y,{address:t}),a.a.createElement("div",{style:{width:"inherit"},dangerouslySetInnerHTML:{__html:r}})))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(Ve,{style:bt.rootContainer},a.a.createElement(this.BodySection,null))}}]),t}(z),bt={cardContainer:{justifyContent:"space-between"},circularProgress:{marginLeft:5},createNewButton:{borderColor:K.color.secondaryColor,borderRadius:K.button.borderRadius,borderWidth:3},dealSectionContainer:{alignItems:"center",width:"100%"},detailSectionContainer:{width:"inherit",textAlign:"justify"},locationButtonContainer:{alignItems:"center",justifyContent:"center"},noDealInAreaContainer:{},rootContainer:{alignItems:"center",justifyContent:"center",padding:15},searchButton:{borderColor:K.remind.secondaryColor,borderRadius:K.button.borderRadius,backgroundColor:K.remind.secondaryColor,borderWidth:3},searchMethodLabel:{coordinate:{borderColor:K.remind.primaryColor,borderRadius:K.button.borderRadius,backgroundColor:K.remind.primaryColor,borderWidth:3,paddingBottom:5,paddingTop:5},manual:{borderColor:K.remind.secondaryColor,borderRadius:K.button.borderRadius,backgroundColor:K.remind.secondaryColor,borderWidth:3,paddingBottom:5,paddingTop:5}},topBarContainer:{justifyContent:"space-between",paddingTop:15,width:"100%"}},Ct=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onBlurTextField=function(){console.log("onBlurTextField")},n.onClickedCard=function(){console.log("Card Clicked")},n.onClickedDealSection=function(){console.log("onClickedDealSection"),n.setState({showSearchButton:!1})},n.onClickSearch=function(){console.log("onClickSearch")},n.onClickDownVote=function(){console.log("onClickDownVote")},n.onClickUpVote=function(){console.log("onClickUpVote")},n.onChangeSearchTextField=function(e){console.log("onChangeSearchTextField"),n.setState({})},n.onFocusTextField=function(){console.log("onFocusTextField"),n.setState({showSearchButton:!0})},n.executeGetDeals=function(){n.props.selectedAddress.area&&n.appContext.serviceExecutor.execute(R(n.props.selectedAddress)).then((function(e){n.props.setDeals(e),n.setState({isLoading:!1})}))},n.state={isCreateDealDrawerOpen:!1,isLoading:!0,showSearchButton:!1,textFieldValue:"",useAutoLocation:!0},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){return w.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.awrap(this.setCurrentPosition());case 2:return e.next=4,w.a.awrap(this.setCurrentAddress());case 4:return e.next=6,w.a.awrap(this.executeGetDeals());case 6:case"end":return e.stop()}}),null,this)}},{key:"setCurrentPosition",value:function(){var e=this;return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.appContext.isMock){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.abrupt("return",new Promise((function(t,n){e.appContext.transformer.getCurrentLocation((function(n){return console.debug("Current Coordinate: ",n),e.props.setGeolocation(n),t()}))})));case 3:case"end":return t.stop()}}),null,this)}},{key:"setCurrentAddress",value:function(){var e=this;return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r;e.appContext.serviceExecutor.execute((r={coordinate:e.props.position.coordinate},{method:"GET",hasMock:!0,isMultipartFileRequest:!1,url:"/position",optionalRequestParam:function(){return F(r)},serviceName:b.GET_CURRENT_ADDRESS})).then((function(n){return e.props.setAddressPrediction(n),e.props.setLoadingPosition(!1),t()}))})));case 1:case"end":return t.stop()}}))}},{key:"sortDeals",value:function(e){return e.sort((function(e,t){return t.timestamp-e.timestamp}))}},{key:"render",value:function(){var e=this.state,t=(e.isCreateDealDrawerOpen,e.showSearchButton),n=e.textFieldValue,r=(e.useAutoLocation,this.sortDeals(this.props.deals?this.props.deals:[]));return a.a.createElement(ft,{deals:r,executeGetDeals:this.executeGetDeals,isLoadingDeals:this.state.isLoading,onBlurTextField:this.onBlurTextField,onClickCard:this.onClickedCard,onClickDealSection:this.onClickedDealSection,onClickSearch:this.onClickSearch,onChangeSearchTextField:this.onChangeSearchTextField,onFocusTextField:this.onFocusTextField,selectedAddress:this.props.selectedAddress,showSearchButton:t,textFieldValue:n})}}]),t}(z),Et=Object(x.b)((function(e){return{addressesPrediction:e.addressesPrediction,deals:e.deals,position:e.position,selectedAddress:e.selectedAddress}}),{setAddressPrediction:function(e){return function(t){t({type:r.SET_ADDRESS_PREDICTION,payload:e})}},setDeals:m,setGeolocation:function(e){return function(t){t({type:r.SET_GEOLOCATION,payload:e})}},setLoadingPosition:function(e){return function(t){t({type:r.SET_LOADING_POSITION,payload:e})}}})(Ct),yt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return null}},{key:"componentDidMount",value:function(){this.checkOAuthFromUrl(),this.getUserProfile()}},{key:"checkOAuthFromUrl",value:function(){var e=this,t=this.checkOAuth(),n=t.authorizationCode;t.oAuthProvider===g.GOOGLE&&this.appContext.serviceExecutor.execute(function(e,t){return{hasMock:!1,isMultipartFileRequest:!1,method:"POST",url:"/oauth/google",optionalRequestParam:function(){return M(["authorizationCode",e,"redirectUrl",t])},serviceName:b.LOGIN_OAUTH_GOOGLE}}(n,this.appContext.oAuthRedirectUrl)).then((function(){e.onOAuthLoginComplete(),e.getUserProfile()}))}},{key:"getUserProfile",value:function(){var e=this;this.appContext.serviceExecutor.execute({hasMock:!1,isMultipartFileRequest:!1,method:"GET",url:"/userProfile",serviceName:b.GET_USER_PROFILE}).then((function(t){return e.props.setUserProfile(t)}))}}]),t}(z),Ot=Object(x.b)(null,{setUserProfile:f})(yt),vt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(x.a,{store:j},a.a.createElement(Ot,null),a.a.createElement("div",{className:"App-header"},a.a.createElement(X,null)),a.a.createElement("div",{className:"Content"},a.a.createElement(Et,null)))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(vt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},58:function(e,t,n){}},[[133,1,2]]]);
//# sourceMappingURL=main.e74772c0.chunk.js.map