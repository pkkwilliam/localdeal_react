(this.webpackJsonplocal_deal=this.webpackJsonplocal_deal||[]).push([[4],[,,,,,function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Announcement="Announcement",e.Banner="Banner",e.CollapseCard="CollapseCard",e.CreateDeal="CreateDeal",e.Drawer="Drawer",e.Header="Header",e.HeaderMenu="HeaderMenu",e.LandingPage="LandingPage",e.Modal="Modal",e.Slide="Slide"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"j",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return h})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return m}));var r;!function(e){e.CREATE_DEAL="CREATE_DEAL",e.GET_CURRENT_ADDRESS="GET_CURRENT_ADDRESS",e.GET_LABEL="GET_LABEL",e.GET_DEALS="GET_DEALS",e.GET_PRESIGNED_URL="GET_PRESIGNED_URL",e.GET_SERVER_HEALTH="GET_SERVER_HEALTH",e.GET_USER_PROFILE="GET_USER_PROFILE",e.LOGIN_OAUTH_GOOGLE="LOGIN_OAUTH_GOOGLE",e.LOGOUT_OAUTH="LOGOUT_OAUTH",e.UPDATE_NICKNAME="UPDATE_NICKNAME",e.UPLOAD_IMAGE="UPLOAD_IMAGE",e.UPLOAD_IMAGE_SIGNED_URL="UPLOAD_IMAGE_SIGNED_URL",e.VOTE_CHANGE="VOTE_CHANGE"}(r||(r={}));var a=function(e){return{body:JSON.stringify(e),externalService:!1,hasMock:!1,isMultipartFileRequest:!1,method:"POST",url:"/deals",serviceName:r.CREATE_DEAL}},i=function(e){return{externalService:!1,method:"GET",hasMock:!0,isMultipartFileRequest:!1,url:"/position",optionalRequestParam:function(){return g(e)},serviceName:r.GET_CURRENT_ADDRESS}},s=function(e){return{externalService:!1,hasMock:!0,isMultipartFileRequest:!1,method:"GET",url:"/deals",optionalRequestParam:function(){return"?".concat(v("areaName",e.area||""))},serviceName:r.GET_DEALS}},o=function(e){return{externalService:!1,hasMock:!1,isMultipartFileRequest:!1,method:"GET",url:"/persistence",optionalRequestParam:function(){return E(["fileName",e])},serviceName:r.GET_LABEL}},c=function(e,t){return{externalService:!1,hasMock:!1,isMultipartFileRequest:!1,method:"GET",url:"/file",optionalRequestParam:function(){return"?contentType=".concat(e,"&fileName=").concat(t)},serviceName:r.GET_PRESIGNED_URL}},u=function(){return{externalService:!1,hasMock:!0,isMultipartFileRequest:!1,method:"GET",url:"/health",serviceName:r.GET_SERVER_HEALTH}},l=function(){return{externalService:!1,hasMock:!0,isMultipartFileRequest:!1,method:"GET",url:"/userProfile",serviceName:r.GET_USER_PROFILE}},d=function(e,t){return{externalService:!1,hasMock:!1,isMultipartFileRequest:!1,method:"POST",url:"/oauth/google",optionalRequestParam:function(){return E(["authorizationCode",e,"redirectUrl",t])},serviceName:r.LOGIN_OAUTH_GOOGLE}},h=function(){return{externalService:!1,hasMock:!1,isMultipartFileRequest:!1,method:"DELETE",url:"/oauth",serviceName:r.LOGOUT_OAUTH}},p=function(e){return{externalService:!1,hasMock:!1,isMultipartFileRequest:!1,method:"PUT",optionalRequestParam:function(){return E(["nickname",e])},url:"/userProfile/nickname",serviceName:r.UPDATE_NICKNAME}},f=function(e,t){return{body:e,customHeader:{"Content-Type":e.type},externalService:!0,hasMock:!1,isMultipartFileRequest:!0,method:"PUT",url:t,serviceName:r.UPLOAD_IMAGE_SIGNED_URL}},m=function(e,t){return{externalService:!1,hasMock:!1,isMultipartFileRequest:!1,method:"PUT",optionalRequestParam:function(){var n=["dealId",e.toString()];return void 0!==t&&(n.push("liked"),n.push(t.toString())),E(n)},url:"/deals",serviceName:r.VOTE_CHANGE}},g=function(e){return console.debug("service.ts: generateCurrentAreaRequestParameter -",e),e.areaName?"?".concat(v("areaName",e.areaName)):e.coordinate?"?".concat("latitude","=").concat(e.coordinate.latitude,"&").concat("longitude","=").concat(e.coordinate.longitude):(console.warn("CurrentArea input might be invalid"),"")},E=function(e){var t="?";if(e.length%2===0)for(var n=0;n<e.length;n+=2)0!==n&&(t+="&"),t+="".concat(e[n],"=").concat(e[n+1]);return console.debug("generateUrlParameter:",t),t},v=function(e,t){return"".concat(e,"=").concat(t)}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.GOOGLE="GOOGLE",e.WECHAT="WECHAT",e.NONE="NONE"}(r||(r={}))},,,,,function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.CONTACT_SHOW_EMAIL="CONTACT_SHOW_EMAIL",e.HEADER_MENU="HEADER_MENU",e.CREATE_DEAL_DRAFT="CREATE_DEAL_DRAFT",e.LOGIN_GOOGLE_OAUTH="LOGIN_GOOGLE_OAUTH",e.LOGIN_WECHAT_OAUTH="LOGIN_WECHAT_OAUTH",e.USER_PROFILE_IN_HEADER="USER_PROFILE_IN_HEADER",e.USER_PROFILE_IN_HEADER_MENU="USER_PROFILE_IN_HEADER_MENU"}(r||(r={}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=n(5),s=function(e){return a.a.lazy((function(){return function(e){switch(e){case i.a.Announcement:return Promise.all([n.e(0),n.e(1),n.e(2),n.e(12)]).then(n.bind(null,49));case i.a.Banner:return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,46));case i.a.CollapseCard:return Promise.all([n.e(0),n.e(1),n.e(2),n.e(14)]).then(n.bind(null,40));case i.a.CreateDeal:return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(9)]).then(n.bind(null,47));case i.a.Drawer:return Promise.all([n.e(0),n.e(3),n.e(10),n.e(17)]).then(n.bind(null,41));case i.a.Header:return Promise.all([n.e(0),n.e(1),n.e(2),n.e(16)]).then(n.bind(null,48));case i.a.HeaderMenu:return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(8)]).then(n.bind(null,44));case i.a.LandingPage:return Promise.all([n.e(0),n.e(1),n.e(2),n.e(11)]).then(n.bind(null,45));case i.a.Modal:return Promise.all([n.e(0),n.e(1),n.e(3),n.e(15)]).then(n.bind(null,42));case i.a.Slide:return Promise.all([n.e(7),n.e(18)]).then(n.bind(null,43))}}(e)}))}},function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=a.a.createContext({})},function(e,t,n){"use strict";var r,a=n(1),i=n.n(a),s=n(2),o=n(3),c=n(10),u=n(9),l=n(11),d=n(0),h=n(4),p=n(6),f=n(7),m=function(){function e(t,n,r){var a=this;Object(s.a)(this,e),this.isMock=t,this.serviceUrl=n,this.headers=r,this.generateHeaders=function(e){return e.isMultipartFileRequest?Object(h.a)({},a.headers):Object(h.a)({},a.headers,{"Content-Type":"application/json"})}}return Object(o.a)(e,[{key:"execute",value:function(e){var t,n,r;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.isMock||!e.hasMock){a.next=4;break}return a.abrupt("return",Promise.resolve(g(e.serviceName)));case 4:return t=this.generateHeaders(e),n=e.optionalRequestParam?e.optionalRequestParam():"",r=e.externalService?e.url:this.serviceUrl+e.url+n,a.abrupt("return",fetch(r,{body:e.body,credentials:e.externalService?"omit":"include",headers:e.externalService?e.customHeader:t,method:e.method,mode:"cors"}).then((function(e){var t,n=null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.match("application/json"),r=e.status;return r<400?204!==r&&n?Promise.resolve(e.json()):Promise.resolve():e.status>400?Promise.reject():void 0})).catch((function(e){return console.warn("Something is wrong while fetch: ",r,e),Promise.reject(e)})));case 8:case"end":return a.stop()}}),null,this)}},{key:"isJsonResponse",value:function(e){try{return JSON.parse(e),!0}catch(t){return!1}}}]),e}(),g=function(e){switch(console.debug("get mock response:",e),e){case p.j.GET_DEALS:return E;case p.j.GET_CURRENT_ADDRESS:return v;case p.j.GET_SERVER_HEALTH:return b;case p.j.GET_USER_PROFILE:return A;default:return Promise.reject()}},E={deals:[{id:1,address:"Mock Address 2",attendCount:5,createdBy:{id:0,dealCreated:[9,8,2],likedSum:0,name:"Mock User",imageUrl:"https://www.picclickimg.com/d/l400/pict/163647152800_/Cubd-Collectibles-Disney-Frozen-Elsa-Small-Soft-Stuffed.jpg",oAuthProvider:f.a.GOOGLE},description:'<p><img src="https://storage.cloud.google.com/deal_image/1577871875967"></p>',filesUrl:["https://open-shelf.ca/wp-content/uploads/2015/03/twitter-logo-small-1024x576@2x.jpg","https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"],serverIdentifierName:"MACAU",title:"\u6fb3\u9580 \u86cb\u9039\u738b\u5b50",timestamp:1577872077582,likedCount:1378,verifiedLikedUserCount:521,liked:!1},{id:1,address:"Mock Address 2",attendCount:5,description:"The content of ExpansionPanels is mounted by default even if the panel is not expanded. This default behavior has server-side rendering and SEO in mind. If you render expensive component trees inside your panels or simply render many panels it might be a good idea to change this default behavior by enabling the unmountOnExit in TransitionProps:",filesUrl:["https://open-shelf.ca/wp-content/uploads/2015/03/twitter-logo-small-1024x576@2x.jpg","https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png","https://open-shelf.ca/wp-content/uploads/2015/03/twitter-logo-small-1024x576@2x.jpg","https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png","https://open-shelf.ca/wp-content/uploads/2015/03/twitter-logo-small-1024x576@2x.jpg"],serverIdentifierName:"MACAU",title:"\u6fb3\u9580 CRAZY \u86cb\u9039\u738b\u5b50",timestamp:1576871229332,likedCount:0,verifiedLikedUserCount:0,liked:!1},{id:2,address:"Mock Address 2",attendCount:0,description:"STTSTSDFounted by default even if the panel is not expanded. This default behavior has server-side rendering and SEO in mind. If you render expensive component trees inside your panels or simply render many panels it might be a good idea to change this default behavior by enabling the unmountOnExit in TransitionProps:",filesUrl:["https://open-shelf.ca/wp-content/uploads/2015/03/twitter-logo-small-1024x576@2x.jpg","https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"],serverIdentifierName:"MACAU",title:"\u6fb3\u9580 CRAZY \u86cb\u9039\u738b\u5b50",timestamp:1576871229332,likedCount:0,verifiedLikedUserCount:0,liked:!1}]},v=[{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u8857166\u865f",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u8857166\u865f",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u8857148\u865f",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u6f01\u7fc1\u885790\u865f",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580\u82b1\u5730\u746a\u5802\u5340",city:"\u82b1\u5730\u746a\u5802\u5340",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580",country:"\u6fb3\u9580"},{id:0,area:"\u6fb3\u9580",formattedAddress:"\u6fb3\u9580",country:"\u6fb3\u9580"}],b={up:!0},A={id:0,dealCreated:[1,3,4],likedSum:1923,name:"Mock User",imageUrl:"https://www.picclickimg.com/d/l400/pict/163647152800_/Cubd-Collectibles-Disney-Frozen-Elsa-Small-Soft-Stuffed.jpg",oAuthProvider:"GOOGLE"},O=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"timeDifferentCalcualtor",value:function(e,t){if(t){var n=new Date,r=new Date(t),a=n.getTime()-r.getTime();return this.getLabelAccrodingToTimeDifference(e,a)}return console.warn("timestamp error: ",t),e.unknown}},{key:"getLabelAccrodingToTimeDifference",value:function(e,t){var n=Math.round(t/864e5);return n>0?"".concat(n).concat(e.day):e.today}},{key:"getCurrentLocation",value:function(e){navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,r=n.latitude,a=n.longitude;e({latitude:r,longitude:a})}))}}]),e}(),_=n(12),P=function(){function e(){Object(s.a)(this,e),this.ALLOW_DEAL_REFRESH=!1,this.DEAL_REFRESH_TIME=5e3,this.APIKEY="vKZywb959gExXaEHSwdzdq7MfZu3Nb",this.X_MADT_APPID="localdeal",this.X_MADT_APP_VERSION="0.0.1",this._serviceExecutor=new m(this.isMock,this.serviceUrl,this.headers),this._transformer=new O}return Object(o.a)(e,[{key:"allowDealRefresh",get:function(){return this.ALLOW_DEAL_REFRESH},set:function(e){this.ALLOW_DEAL_REFRESH=e}},{key:"dealRefreshTime",get:function(){return this.DEAL_REFRESH_TIME}},{key:"features",get:function(){return[_.a.CREATE_DEAL_DRAFT,_.a.CONTACT_SHOW_EMAIL,_.a.HEADER_MENU,_.a.LOGIN_GOOGLE_OAUTH,_.a.LOGIN_WECHAT_OAUTH]}},{key:"headers",get:function(){return{APIKEY:this.APIKEY,XMADTAPPID:this.X_MADT_APPID,XMADTAPPVERSION:this.X_MADT_APP_VERSION}}},{key:"isMock",get:function(){return!1}},{key:"isProd",get:function(){return!0}},{key:"oAuthRedirectUrl",get:function(){return this.isProd?"https://liuda.site":"http://127.0.0.1:3000"}},{key:"serviceExecutor",get:function(){return this._serviceExecutor}},{key:"serviceUrl",get:function(){return this.isProd?"https://liuda.site:8082":"http://127.0.0.1:8081"}},{key:"transformer",get:function(){return this._transformer}}]),e}(),S=n(23),L=n.n(S),y=n(24),R=n.n(y),k=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"imageCompress",value:function(e,t,n,r,a){return new Promise((function(i,s){L.a.imageFileResizer(e,r/5,n,t,a,0,(function(e){i(e)}),"blob")}))}},{key:"getImageInfo",value:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Image;r.src=URL.createObjectURL(e),r.onload=function(){return t({height:r.height,size:e.size,type:e.type,width:r.width})}})));case 1:case"end":return t.stop()}}))}},{key:"imagePrecprocess",value:function(e){var t,n,r,a,s,o,c,u,l;return i.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,i.a.awrap(this.transferToBlob(e));case 2:return t=d.sent,d.next=5,i.a.awrap(this.getImageInfo(t));case 5:return n=d.sent,r=n.height,a=n.size,s=n.type,o=n.width,console.debug("original image size:",a),c=a>1e5?10:100,u=s.split("/"),d.next=15,i.a.awrap(this.imageCompress(t,u[u.length-1],r,o,c));case 15:return l=d.sent,d.next=18,i.a.awrap(this.getImageInfo(l));case 18:return d.abrupt("return",Promise.resolve(l));case 19:case"end":return d.stop()}}),null,this)}},{key:"transferToBlob",value:function(e){return new Promise((function(t,n){return fetch(e).then((function(e){return e.blob()})).then((function(e){return t(e)}))}))}},{key:"fixRotation",value:function(e){var t=this;return new Promise((function(n,r){R()(e,(function(r){return n(r.toDataURL(t.guessImageMime(e)))}),{orientation:!0})}))}},{key:"guessImageMime",value:function(e){return"/"===e.charAt(0)?"image/jpeg":"R"===e.charAt(0)?"image/gif":"i"===e.charAt(0)?"image/png":""}}]),e}(),T=n(15),x=n(25),C=function(){function e(t,n){Object(s.a)(this,e),this.localStorage=t,this.serviceExecutor=n}return Object(o.a)(e,[{key:"checkLabelVersion",value:function(){var e,t,n,r;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=this.getRequestParamLabelName(this.getLanguage()),null===(t=this.localStorage.getLabel())){a.next=10;break}return n=JSON.parse(t),a.next=6,i.a.awrap(this.getRemoteLabelVersion());case 6:r=a.sent,n.labelName!==e||r.version!==n.labelVersion?this.setNewLabel():this.remoteLabel=n,a.next=11;break;case 10:this.setNewLabel();case 11:case"end":return a.stop()}}),null,this)}},{key:"setNewLabel",value:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(this.getRemoteLabel());case 2:e=t.sent,this.localStorage.setLabel(JSON.stringify(e)),this.remoteLabel=e;case 5:case"end":return t.stop()}}),null,this)}},{key:"getLanguage",value:function(){return"chinese_traditional"}},{key:"getRemoteLabel",value:function(){return this.serviceExecutor.execute(Object(p.d)(this.getRequestParamLabelName(this.getLanguage())))}},{key:"getRemoteLabelVersion",value:function(){var e=this.getRequestParamLabelName(this.getLanguage())+"_version";return this.serviceExecutor.execute(Object(p.d)(e))}},{key:"getRequestParamLabelName",value:function(e){return"label_chinese_traditional"}},{key:"label",get:function(){return null===e.remoteLabel?x:e.remoteLabel}},{key:"remoteLabel",set:function(t){e.remoteLabel=t}}]),e}();C.remoteLabel=null,function(e){e.hideAnnouncement="hideAnnouncement",e.Label="Label"}(r||(r={}));var U=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"clear",value:function(){localStorage.clear()}},{key:"getHideAnnouncement",value:function(){var e=localStorage.getItem(r.hideAnnouncement);return null!==e&&"true"===e}},{key:"setHideAnnouncement",value:function(e){localStorage.setItem(r.hideAnnouncement,e.toString())}},{key:"getLabel",value:function(){return localStorage.getItem(r.Label)}},{key:"setLabel",value:function(e){localStorage.setItem(r.Label,e)}}]),e}();n.d(t,"a",(function(){return D}));var D=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a))))._localStorage=new U,n._appContext=new P,n._imageProcessor=new k,n._labelService=new C(n._localStorage,n.appContext.serviceExecutor),n.executeGetDeals=function(){var e;(null===(e=n.appState.address.selectedAddress)||void 0===e?void 0:e.area)&&n.appContext.serviceExecutor.execute(Object(p.c)(n.appState.address.selectedAddress)).then((function(e){n.appState.deal.setDeals(e.deals)}))},n.setDeals=function(e){var t;(null===(t=n.appState.address.selectedAddress)||void 0===t?void 0:t.area)&&n.appContext.serviceExecutor.execute(Object(p.c)(n.appState.address.selectedAddress)).then((function(t){e(t.deals)}))},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"checkOAuth",value:function(){var e=window.location.search,t=new URLSearchParams(e),n=t.get("state"),r=t.get("code"),a=f.a.NONE,i="";return n===f.a.GOOGLE&&(a=f.a.GOOGLE,i=null!==r&&void 0!==r?r:""),{authorizationCode:i,oAuthProvider:a}}},{key:"onOAuthLoginComplete",value:function(){window.history.pushState(null,document.title,"/")}},{key:"executeInit",value:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(Promise.all([this.getServerStatus().then((function(e){return e})),this.setCurrentPosition()]));case 2:if(!(e=t.sent)[0]){t.next=11;break}return this._labelService.checkLabelVersion(),this.checkOAuthFromUrl(),this.getUserProfile(),t.next=9,i.a.awrap(this.setCurrentAddress());case 9:return t.next=11,i.a.awrap(this.executeGetDeals());case 11:return this.forceUpdate(),t.abrupt("return",e[0]);case 13:case"end":return t.stop()}}),null,this)}},{key:"checkOAuthFromUrl",value:function(){var e=this,t=this.checkOAuth(),n=t.authorizationCode;t.oAuthProvider===f.a.GOOGLE&&this.appContext.serviceExecutor.execute(Object(p.h)(n,this.appContext.oAuthRedirectUrl)).then((function(){e.onOAuthLoginComplete(),e.getUserProfile()}))}},{key:"setCurrentPosition",value:function(){var e=this;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.appContext.isMock){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.abrupt("return",new Promise((function(t,n){e.appContext.transformer.getCurrentLocation((function(n){return e.appState.position.setGeolocation(n),t()}))})));case 3:case"end":return t.stop()}}),null,this)}},{key:"setCurrentAddress",value:function(){var e=this;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.appContext.serviceExecutor.execute(Object(p.b)({coordinate:e.appState.position.coordinate})).then((function(n){return e.appState.address.setPredicteAddresses(n),e.appState.position.setLoadingPosition(!1),e.appState.address.setSelectedAddress(n[0]),t()}))})));case 1:case"end":return t.stop()}}))}},{key:"getServerStatus",value:function(){var e=this;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.appContext.serviceExecutor.execute(Object(p.f)()).then((function(t){return e.appState.service.setServiceUp(t.up),Promise.resolve(t.up)})).catch((function(t){return e.appState.service.setServiceUp(!1),Promise.reject(!1)})));case 1:case"end":return t.stop()}}),null,this)}},{key:"getUserProfile",value:function(){var e=this;this.appContext.serviceExecutor.execute(Object(p.g)()).then((function(t){return e.appState.user.setUserProfile(t)}))}},{key:"appContext",get:function(){return this._appContext}},{key:"appState",get:function(){return this.context}},{key:"imageProcessor",get:function(){return this._imageProcessor}},{key:"labels",get:function(){return this._labelService.label}},{key:"localStorage",get:function(){return this._localStorage}}]),t}(d.Component);D.contextType=T.a},,function(e,t,n){},,,,,,,function(e){e.exports=JSON.parse('{"labelName":"label_chinese_traditional","labelVersion":1,"addressDisplay":{"nearBy":"\u9644\u8fd1"},"announcement":{"messages":[{"content":"\u8aa0\u9080\u5e02\u5834\u63a8\u5ee3","type":"boldText"},{"content":"Tensor Technology = \u521d\u5275\u79d1\u6280\u516c\u53f8\\n\u4e3b\u8981\u65b9\u5411\u662f\u8b93\u7528\u6236\u6216\u4f01\u696d\u4e3b\u52d5\u767c\u8d77\u6d3b\u52d5\\n\u8b93\u9644\u8fd1\u6709\u8208\u8da3\u6216\u7a7a\u9592\u7684\u7528\u6236\u53c3\u8207\u8a72\u6d3b \u516c\u53f8\u73fe\u5df2\u6709\u4e00\u4f4d\u5f9e\u7f8e\u570b50\u5f37\u4f01\u696d\u56de\u6fb3\u7684\u96fb\u8166\u8edf\u4ef6\u5de5\u7a0b\u5e2b\u5354\u52a9\u958b\u767c \u73fe\u8aa0\u9080\u6709\u5e02\u5834\u63a8\u5ee3\u80fd\u529b\u548c\u7d93\u9a57\u7684\u4eba\u58eb\u4e00\u4f4d\u53c3\u8207\u5171\u540c\u767c\u5c55\u8a72\u9805 \u5982\u6709\u610f\u5411\u8acb\u9ede\u64ca\u53f3\u4e0a\u89d2\u627e\u806f\u7d61\u6211\u5011","type":"text"}],"version":1},"createDealPageV2":{"addressNotDetailed":"* \u5730\u5740\u5514\u5920\u8a73\u7d30","descriptionPlaceHolder":"\u8b1b\u4e00\u4e0b\u7279\u5225\u7684\u5730\u65b9","error":"\u4f3a\u670d\u5668\u51fa\u932f\u5566!!!\u7a0b\u5e8f\u733f\u5df2\u7d93\u5728\u8def\u4e0a\u4e86!!!","imageDimensionTips":"\u6bd4\u4f8b\u76f8\u7d04\u7684\u5716\u7247\u6703\u7372\u5f97\u66f4\u597d\u7684\u89c0\u8cde\u9ad4\u9a57","manualEnterAddress":"\u624b\u52d5\u8f38\u5165","missingAddress":"* \u7d66\u9ede\u81c9\u5b50\u9078\u500b\u5730\u5740\u5566","missingField":"* \u81f3\u5c11\u52a0\u4e00\u9ede\u5167\u5bb9\u5427","saveDraft":"\u5b58\u8349\u7a3f","success":"\u767c\u5e03\u6210\u529f","submitPost":"\u767c\u5e03\u597d\u73a9","uploadingImage":"\u760b\u72c2\u4e0a\u50b3\u5716\u7247","uploadingDeal":"\u4f3a\u670d\u5668\u611b\u7406\u4e0d\u7406\u4e2d","uploadCompleted":"\u641e\u6382!!!","titlePlaceHolder":"\u6a19\u984c\u6709\u8da3\u6703\u6709\u66f4\u591aLike\u54e6"},"date":{"day":"\u65e5","today":"\u4eca\u65e5","unknown":"\u4e0d\u660e"},"header":{"currentLocation":"\u7576\u524d\u5730\u5340:","loading":"Google API \u6b63\u5728\u70ba\u4f60\u5b9a\u4f4d","refresh":"\u5237\u65b0","serverError":"\u670d\u52d9\u5668\u65b7\u7dda\u4e86"},"headerMenu":{"bugReportDescription":"\u6b61\u8fce\u544a\u8a34\u6211\u5011\u4efb\u4f55bug\uff0c\u6216\u6709\u8da3\u7684\u529f\u80fd","closeButton":"\u95dc\u9589","contactUs":"\u806f\u7d61\u6211\u5011","currentDevelopingFeatuers":["\u4fee\u7406\u5f8c\u53f0\u670d\u52d9\u8207\u4f3a\u670d\u5668 (\u512a\u5148\u8655\u7406): 0%","Google\u767b\u5165 \u9032\u5ea6: 80%","\u5b58\u8349\u7a3f \u9032\u5ea6: 0%","\u77ed\u5f71\u7247 \u9032\u5ea6: 0%","\u5fae\u4fe1\u767b\u5165 \u9032\u5ea6: 35% (\u7b49\u5f85\u5be9\u6279)","\u6df1\u8272\u6a21\u5f0f \u9032\u5ea6: 20%","\u516c\u544a\u6587\u5b57 \u9032\u5ea6: 0%"],"developingFeature":"\u7b49\u5f85\u958b\u767c\u4e2d\u7684\u529f\u80fd:","emailAddress":"tensortechnology@gmail.com","logout":"\u767b\u51fa","moreFeatureIsComingDescription":"\u7522\u54c1\u7d93\u7406\u6b63\u5728\u97ad\u64bb\u7406\u7a0b\u5e8f\u54e1\u63a8\u51fa\u66f4\u591a\u65b0\u529f\u80fd"},"landingPage":{"area":"\u5730\u5340","clickToChange":"\u9ede\u64ca\u66f4\u6539","createDealButton":"\u5275\u5efa\u597d\u53bb\u8655","loadingDeals":"\u6b63\u5728\u5168\u529b\u70ba\u4f60\u8b80\u53d6\u597d\u53bb\u8655","geolocationProvider":"API\u5b9a\u4f4d","noDeal":"\u7db2\u53cb\u5011\u672a\u66fe\u6dfb\u52a0\u597d\u53bb\u8655\\n\u8acb\u4f60\u5e6b\u52a9\u6211\u5011\u4e00\u8d77\u8986\u84cb\u9019\u500b\u5340\u57df\u597d\u55ce?"},"localDealCardPage":{"expand":"\u5c55\u958b","collapse":"\u6536\u8d77"},"login":{"formName":"\u767b\u5165","loginNotYetAvaiable":"\u672a\u7528\u5f97\u554a \u7b49\u9663\u5148\u5566","password":"\u5bc6\u78bc","register":"\u6ce8\u518a\u8cec\u865f","submit":"\u767b\u5165","username":"UID/\u7528\u6236\u540d/EMAIL"},"oAuth":{"likedReceived":"\u6536\u5230\u7684\u559c\u611b:","login":"\u767b\u5165","logout":"\u767b\u51fa","postCreated":"\u5df2\u767c\u5e03:","successfullyLogout":"\u6210\u529f\u767b\u51fa","undefined":"\u4e0d\u660e","userProfile":{"cancel":"\u53d6\u6d88","name":"\u540d\u5b57","save":"\u5132\u5b58"}},"position":{"currentArea":"\u6240\u5728\u5730\u5340","loading":"\u6211\u5011\u6b63\u5728\u52aa\u529b\u70ba\u60a8\u8b80\u53d6\u5b9a\u4f4d"},"title":"\u53bb\u908a"}')},function(e,t,n){e.exports=n(39)},,,,,function(e,t,n){},,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(17),s=n.n(i),o=(n(31),n(2)),c=n(3),u=n(10),l=n(9),d=n(11),h=(n(18),n(4)),p=n(15),f=n(7),m=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).removeUserProfile=function(){var e={id:0,dealCreated:[],likedSum:0,imageUrl:"",name:"",oAuthProvider:f.a.NONE};n.setState({user:Object(h.a)({},n.state.user,{userProfile:e})})},n.setDeals=function(e){n.setState({deal:Object(h.a)({},n.state.deal,{deals:e})})},n.updateDeal=function(e){},n.setShowBanner=function(e){n.setState({banner:Object(h.a)({},n.state.banner,{show:e})})},n.setBannerProgressMessage=function(e){n.setState({banner:Object(h.a)({},n.state.banner,{progressMessage:e})})},n.setGeolocation=function(e){n.setState({position:Object(h.a)({},n.state.position,{coordinate:e})})},n.setLoadingPosition=function(e){n.setState({position:Object(h.a)({},n.state.position,{loadingPosition:e})})},n.setPredicteAddresses=function(e){n.setState({address:Object(h.a)({},n.state.address,{addressesPrediction:e})})},n.setSelectedAddress=function(e){n.setState({address:Object(h.a)({},n.state.address,{selectedAddress:e})})},n.setServiceUp=function(e){n.setState({service:Object(h.a)({},n.state.service,{serviceUp:e})})},n.setUserProfile=function(e){n.setState({user:Object(h.a)({},n.state.user,{userProfile:e})})},n.state={address:{addressesPrediction:[],selectedAddress:{area:"",street1:"",street2:"",city:"",state:"",country:"",zipCode:""}},banner:{show:!1,progressMessage:""},deal:{deals:[]},position:{loadingPosition:!0,coordinate:{latitude:0,longitude:0}},service:{serviceUp:!0},user:{userProfile:{id:0,dealCreated:[],likedSum:0,name:"",imageUrl:"",oAuthProvider:f.a.NONE}}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.address,n=e.banner,r=e.deal,i=e.position,s=e.service,o=e.user;return a.a.createElement(p.a.Provider,{value:{address:Object(h.a)({},t,{setSelectedAddress:this.setSelectedAddress,setPredicteAddresses:this.setPredicteAddresses}),banner:Object(h.a)({},n,{setShowBanner:this.setShowBanner,setBannerProgressMessage:this.setBannerProgressMessage}),deal:Object(h.a)({},r,{setDeals:this.setDeals,updateDeal:this.updateDeal}),position:Object(h.a)({},i,{setGeolocation:this.setGeolocation,setLoadingPosition:this.setLoadingPosition}),service:Object(h.a)({},s,{setServiceUp:this.setServiceUp}),user:Object(h.a)({},o,{removeUserProfile:this.removeUserProfile,setUserProfile:this.setUserProfile})}},this.props.children)}}]),t}(r.Component),g=n(5),E=n(14),v=(n(32),n(33),n(16)),b=Object(E.a)(g.a.Announcement),A=Object(E.a)(g.a.Banner),O=Object(E.a)(g.a.Header),_=Object(E.a)(g.a.LandingPage),P=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.executeInit()}},{key:"render",value:function(){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(a.a.Fragment,null)},a.a.createElement("div",{className:"App-header"},a.a.createElement(O,null)),a.a.createElement(b,null),a.a.createElement(A,null),a.a.createElement("div",{className:"Content"},a.a.createElement(_,null)))}}]),t}(v.a),S=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(m,null,a.a.createElement(P,null))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[26,5,6]]]);
//# sourceMappingURL=main.408cb285.chunk.js.map